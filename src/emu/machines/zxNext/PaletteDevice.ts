import type { IGenericDevice } from "@emu/abstractions/IGenericDevice";
import type { IZxNextMachine } from "@renderer/abstractions/IZxNextMachine";

export const TBBLUE_DEF_TRANSPARENT_COLOR = 0xe3;

const defaultUlaColors = [
  0x000, // 000_000_000
  0x005, // 000_000_101
  0x140, // 101_000_000
  0x145, // 101_000_101
  0x028, // 000_101_000
  0x02d, // 000_101_101
  0x168, // 101_101_000
  0x16d, // 101_101_101
  0x000, // 000_000_000
  0x007, // 000_000_111
  0x1c0, // 111_000_000
  0x1c7, // 111_000_111
  0x038, // 000_111_000
  0x03f, // 000_111_111
  0x1f8, // 111_111_000
  0x1ff //  111_111_111
];

export class PaletteDevice implements IGenericDevice<IZxNextMachine> {
  private _paletteIndex: number;
  private _disablePaletteWriteAutoInc: boolean;
  private _selectedPalette: number;
  private _secondSpritePalette: boolean;
  private _secondLayer2Palette: boolean;
  private _secondUlaPalette: boolean;
  private _secondTilemapPalette: boolean;
  private _enableUlaNextMode: boolean;
  private _secondWrite: boolean;

  ulaFirst: number[] = [];
  ulaSecond: number[] = [];
  layer2First: number[] = [];
  layer2Second: number[] = [];
  private layer2RgbFirst: number[] = [];
  private layer2RgbSecond: number[] = [];
  spriteFirst: number[] = [];
  spriteSecond: number[] = [];
  private spriteRgbFirst: number[] = [];
  private spriteRgbSecond: number[] = [];
  tilemapFirst: number[] = [];
  tilemapSecond: number[] = [];
  private tilemapRgbFirst: number[] = [];
  private tilemapRgbSecond: number[] = [];
  ulaNextByteFormat: number;
  storedPaletteValue: number;

  constructor(public readonly machine: IZxNextMachine) {
    this.reset();
  }

  reset(): void {
    this._paletteIndex = 0;
    this._disablePaletteWriteAutoInc = false;
    this._selectedPalette = 0;
    this._secondUlaPalette = false;
    this._secondLayer2Palette = false;
    this._secondSpritePalette = false;
    this._secondTilemapPalette = false;
    this._enableUlaNextMode = false;
    this._secondWrite = false;
    this.storedPaletteValue = 0;
    for (let i = 0; i < 256; i++) {
      let color = (i << 1) | (i & 2 ? 1 : 0);

      // --- The Layer 2 and sprite palettes follow a strange pattern.
      // --- They set Bit 0 as the initial Bit 1.
      // --- It does not follow the logic of mixing bit 0 and bit 1 used in register 41H.
      this.layer2First[i] = this.layer2Second[i] = color;
      this.layer2RgbFirst[i] = this.layer2RgbSecond[i] = zxNextBgra[color];
      this.spriteFirst[i] = this.spriteSecond[i] = color;
      this.spriteRgbFirst[i] = this.spriteRgbSecond[i] = zxNextBgra[color];
      this.tilemapFirst[i] = this.tilemapSecond[i] = color;
      this.tilemapRgbFirst[i] = this.tilemapRgbSecond[i] = zxNextBgra[color];
    }

    // --- The ULA palette is a bit more complex, it repeats every 16 colors
    // --- Bright magenta is a transparent color by default (1C7H and 1C6H / 2 = E3H)
    // --- Let's change it to 1CF, which is a color FF24FFH. It is not pure magenta,
    // --- but avoids the default transparent problem.
    // --- This is also corrected by NextOS when starting, but if we start TbBlue in
    // --- fast-boot mode, the bright magenta would be transparent.
    for (let j = 0; j < 16; j++) {
      for (let i = 0; i < 16; i++) {
        const idx = j * 16 + i;
        const colorValue = i !== 11 ? defaultUlaColors[i] : 0x1cf;
        this.ulaFirst[idx] = this.ulaSecond[idx] = colorValue;
      }
    }
  }

  get nextReg40Value(): number {
    return this._paletteIndex;
  }

  set nextReg40Value(value: number) {
    this._paletteIndex = value & 0xff;
    this._secondWrite = false;
  }

  get nextReg41Value(): number {
    return this.getCurrentPalette()[this._paletteIndex] >> 1;
  }

  set nextReg41Value(value: number) {
    this.storedPaletteValue = value & 0xff;
    const regValue = (value << 1) | (value & 0x03 ? 1 : 0);
    this.getCurrentPalette()[this._paletteIndex] = regValue;
    if (!this._disablePaletteWriteAutoInc) {
      this._paletteIndex = (this._paletteIndex + 1) & 0xff;
    }
    this._secondWrite = false;
    this.updateUlaPalette();
  }

  get nextReg43Value(): number {
    return (
      (this._disablePaletteWriteAutoInc ? 0x80 : 0) |
      (this._selectedPalette << 4) |
      (this._secondSpritePalette ? 0x08 : 0) |
      (this._secondLayer2Palette ? 0x04 : 0) |
      (this._secondUlaPalette ? 0x02 : 0) |
      (this._enableUlaNextMode ? 0x01 : 0)
    );
  }

  set nextReg43Value(value: number) {
    this._disablePaletteWriteAutoInc = (value & 0x80) !== 0;
    this._selectedPalette = (value & 0x70) >> 4;
    this._secondSpritePalette = (value & 0x08) !== 0;
    this._secondLayer2Palette = (value & 0x04) !== 0;
    const oldSecondUlaPalette = this._secondUlaPalette;
    this._secondUlaPalette = (value & 0x02) !== 0;
    this._enableUlaNextMode = (value & 0x01) !== 0;
    this._secondWrite = false;
    this.updateUlaPalette();
    // Update border cache if active ULA palette switched
    if (oldSecondUlaPalette !== this._secondUlaPalette) {
      this.machine.composedScreenDevice.updateBorderRgbCache();
    }
  }

  get nextReg44Value(): number {
    const value = this.getCurrentPalette()[this._paletteIndex];
    return value & 0x01;
  }

  set nextReg44Value(value: number) {
    this.storedPaletteValue = value & 0xff;
    const palette = this.getCurrentPalette();
    if (!this._secondWrite) {
      palette[this._paletteIndex] = (value & 0xff) << 1;
    } else {
      palette[this._paletteIndex] = palette[this._paletteIndex] | (value & 0x01);
      if (palette === this.layer2First || palette === this.layer2Second) {
        if (value & 0x80) {
          // --- Sign priority color for Layer 2 palettes
          palette[this._paletteIndex] |= 0x200;
        }
      }
      if (!this._disablePaletteWriteAutoInc) {
        this._paletteIndex = (this._paletteIndex + 1) & 0xff;
      }
    }
    this._secondWrite = !this._secondWrite;
    this.updateUlaPalette();
  }

  get paletteIndex(): number {
    return this._paletteIndex;
  }

  get disablePaletteWriteAutoInc(): boolean {
    return this._disablePaletteWriteAutoInc;
  }

  get selectedPalette(): number {
    return this._selectedPalette;
  }

  get secondSpritePalette(): boolean {
    return this._secondSpritePalette;
  }

  get secondLayer2Palette(): boolean {
    return this._secondLayer2Palette;
  }

  get secondUlaPalette(): boolean {
    return this._secondUlaPalette;
  }

  get secondTilemapPalette(): boolean {
    return this._secondTilemapPalette;  
  }

  set secondTilemapPalette(value: boolean) {
    this._secondTilemapPalette = value;
  }

  get enableUlaNextMode(): boolean {
    return this._enableUlaNextMode;
  }

  get secondWrite(): boolean {
    return this._secondWrite;
  }

  getCurrentPalette(): number[] {
    switch (this._selectedPalette) {
      case 0:
        return this.ulaFirst;
      case 1:
        return this.layer2First;
      case 2:
        return this.spriteFirst;
      case 3:
        return this.tilemapFirst;
      case 4:
        return this.ulaSecond;
      case 5:
        return this.layer2Second;
      case 6:
        return this.spriteSecond;
      default:
        return this.tilemapSecond;
    }
  }

  getUlaRgb333(index: number): number {
    return this._secondUlaPalette
      ? this.ulaSecond[index & 0xff]
      : this.ulaFirst[index & 0xff];
  }

  getLayer2Rgb333(index: number): number {
    return this._secondLayer2Palette
      ? this.layer2Second[index & 0xff]
      : this.layer2First[index & 0xff];
  }

  getSpriteRgb333(index: number): number {
    return this._secondSpritePalette
      ? this.spriteSecond[index & 0xff]
      : this.spriteFirst[index & 0xff];
  }

  getTilemapRgb333(index: number): number {
    return this.tilemapSecond[index & 0xff];
  }

  private updateUlaPalette(): void {
    if (this._selectedPalette === 0) {
      this.machine.screenDevice.setCurrentUlaColorsFromPalette(
        this.ulaFirst,
        this._enableUlaNextMode,
        this.ulaNextByteFormat
      );
    } else if (this._selectedPalette === 4) {
      this.machine.screenDevice.setCurrentUlaColorsFromPalette(
        this.ulaSecond,
        this._enableUlaNextMode,
        this.ulaNextByteFormat
      );
    }
  }
}

export const zxNextRgb333Codes: number[] = [
  0x000000, 0x000024, 0x000049, 0x00006d, 0x000092, 0x0000b6, 0x0000db, 0x0000ff, 0x002400,
  0x002424, 0x002449, 0x00246d, 0x002492, 0x0024b6, 0x0024db, 0x0024ff, 0x004900, 0x004924,
  0x004949, 0x00496d, 0x004992, 0x0049b6, 0x0049db, 0x0049ff, 0x006d00, 0x006d24, 0x006d49,
  0x006d6d, 0x006d92, 0x006db6, 0x006ddb, 0x006dff, 0x009200, 0x009224, 0x009249, 0x00926d,
  0x009292, 0x0092b6, 0x0092db, 0x0092ff, 0x00b600, 0x00b624, 0x00b649, 0x00b66d, 0x00b692,
  0x00b6b6, 0x00b6db, 0x00b6ff, 0x00db00, 0x00db24, 0x00db49, 0x00db6d, 0x00db92, 0x00dbb6,
  0x00dbdb, 0x00dbff, 0x00ff00, 0x00ff24, 0x00ff49, 0x00ff6d, 0x00ff92, 0x00ffb6, 0x00ffdb,
  0x00ffff, 0x240000, 0x240024, 0x240049, 0x24006d, 0x240092, 0x2400b6, 0x2400db, 0x2400ff,
  0x242400, 0x242424, 0x242449, 0x24246d, 0x242492, 0x2424b6, 0x2424db, 0x2424ff, 0x244900,
  0x244924, 0x244949, 0x24496d, 0x244992, 0x2449b6, 0x2449db, 0x2449ff, 0x246d00, 0x246d24,
  0x246d49, 0x246d6d, 0x246d92, 0x246db6, 0x246ddb, 0x246dff, 0x249200, 0x249224, 0x249249,
  0x24926d, 0x249292, 0x2492b6, 0x2492db, 0x2492ff, 0x24b600, 0x24b624, 0x24b649, 0x24b66d,
  0x24b692, 0x24b6b6, 0x24b6db, 0x24b6ff, 0x24db00, 0x24db24, 0x24db49, 0x24db6d, 0x24db92,
  0x24dbb6, 0x24dbdb, 0x24dbff, 0x24ff00, 0x24ff24, 0x24ff49, 0x24ff6d, 0x24ff92, 0x24ffb6,
  0x24ffdb, 0x24ffff, 0x490000, 0x490024, 0x490049, 0x49006d, 0x490092, 0x4900b6, 0x4900db,
  0x4900ff, 0x492400, 0x492424, 0x492449, 0x49246d, 0x492492, 0x4924b6, 0x4924db, 0x4924ff,
  0x494900, 0x494924, 0x494949, 0x49496d, 0x494992, 0x4949b6, 0x4949db, 0x4949ff, 0x496d00,
  0x496d24, 0x496d49, 0x496d6d, 0x496d92, 0x496db6, 0x496ddb, 0x496dff, 0x499200, 0x499224,
  0x499249, 0x49926d, 0x499292, 0x4992b6, 0x4992db, 0x4992ff, 0x49b600, 0x49b624, 0x49b649,
  0x49b66d, 0x49b692, 0x49b6b6, 0x49b6db, 0x49b6ff, 0x49db00, 0x49db24, 0x49db49, 0x49db6d,
  0x49db92, 0x49dbb6, 0x49dbdb, 0x49dbff, 0x49ff00, 0x49ff24, 0x49ff49, 0x49ff6d, 0x49ff92,
  0x49ffb6, 0x49ffdb, 0x49ffff, 0x6d0000, 0x6d0024, 0x6d0049, 0x6d006d, 0x6d0092, 0x6d00b6,
  0x6d00db, 0x6d00ff, 0x6d2400, 0x6d2424, 0x6d2449, 0x6d246d, 0x6d2492, 0x6d24b6, 0x6d24db,
  0x6d24ff, 0x6d4900, 0x6d4924, 0x6d4949, 0x6d496d, 0x6d4992, 0x6d49b6, 0x6d49db, 0x6d49ff,
  0x6d6d00, 0x6d6d24, 0x6d6d49, 0x6d6d6d, 0x6d6d92, 0x6d6db6, 0x6d6ddb, 0x6d6dff, 0x6d9200,
  0x6d9224, 0x6d9249, 0x6d926d, 0x6d9292, 0x6d92b6, 0x6d92db, 0x6d92ff, 0x6db600, 0x6db624,
  0x6db649, 0x6db66d, 0x6db692, 0x6db6b6, 0x6db6db, 0x6db6ff, 0x6ddb00, 0x6ddb24, 0x6ddb49,
  0x6ddb6d, 0x6ddb92, 0x6ddbb6, 0x6ddbdb, 0x6ddbff, 0x6dff00, 0x6dff24, 0x6dff49, 0x6dff6d,
  0x6dff92, 0x6dffb6, 0x6dffdb, 0x6dffff, 0x920000, 0x920024, 0x920049, 0x92006d, 0x920092,
  0x9200b6, 0x9200db, 0x9200ff, 0x922400, 0x922424, 0x922449, 0x92246d, 0x922492, 0x9224b6,
  0x9224db, 0x9224ff, 0x924900, 0x924924, 0x924949, 0x92496d, 0x924992, 0x9249b6, 0x9249db,
  0x9249ff, 0x926d00, 0x926d24, 0x926d49, 0x926d6d, 0x926d92, 0x926db6, 0x926ddb, 0x926dff,
  0x929200, 0x929224, 0x929249, 0x92926d, 0x929292, 0x9292b6, 0x9292db, 0x9292ff, 0x92b600,
  0x92b624, 0x92b649, 0x92b66d, 0x92b692, 0x92b6b6, 0x92b6db, 0x92b6ff, 0x92db00, 0x92db24,
  0x92db49, 0x92db6d, 0x92db92, 0x92dbb6, 0x92dbdb, 0x92dbff, 0x92ff00, 0x92ff24, 0x92ff49,
  0x92ff6d, 0x92ff92, 0x92ffb6, 0x92ffdb, 0x92ffff, 0xb60000, 0xb60024, 0xb60049, 0xb6006d,
  0xb60092, 0xb600b6, 0xb600db, 0xb600ff, 0xb62400, 0xb62424, 0xb62449, 0xb6246d, 0xb62492,
  0xb624b6, 0xb624db, 0xb624ff, 0xb64900, 0xb64924, 0xb64949, 0xb6496d, 0xb64992, 0xb649b6,
  0xb649db, 0xb649ff, 0xb66d00, 0xb66d24, 0xb66d49, 0xb66d6d, 0xb66d92, 0xb66db6, 0xb66ddb,
  0xb66dff, 0xb69200, 0xb69224, 0xb69249, 0xb6926d, 0xb69292, 0xb692b6, 0xb692db, 0xb692ff,
  0xb6b600, 0xb6b624, 0xb6b649, 0xb6b66d, 0xb6b692, 0xb6b6b6, 0xb6b6db, 0xb6b6ff, 0xb6db00,
  0xb6db24, 0xb6db49, 0xb6db6d, 0xb6db92, 0xb6dbb6, 0xb6dbdb, 0xb6dbff, 0xb6ff00, 0xb6ff24,
  0xb6ff49, 0xb6ff6d, 0xb6ff92, 0xb6ffb6, 0xb6ffdb, 0xb6ffff, 0xdb0000, 0xdb0024, 0xdb0049,
  0xdb006d, 0xdb0092, 0xdb00b6, 0xdb00db, 0xdb00ff, 0xdb2400, 0xdb2424, 0xdb2449, 0xdb246d,
  0xdb2492, 0xdb24b6, 0xdb24db, 0xdb24ff, 0xdb4900, 0xdb4924, 0xdb4949, 0xdb496d, 0xdb4992,
  0xdb49b6, 0xdb49db, 0xdb49ff, 0xdb6d00, 0xdb6d24, 0xdb6d49, 0xdb6d6d, 0xdb6d92, 0xdb6db6,
  0xdb6ddb, 0xdb6dff, 0xdb9200, 0xdb9224, 0xdb9249, 0xdb926d, 0xdb9292, 0xdb92b6, 0xdb92db,
  0xdb92ff, 0xdbb600, 0xdbb624, 0xdbb649, 0xdbb66d, 0xdbb692, 0xdbb6b6, 0xdbb6db, 0xdbb6ff,
  0xdbdb00, 0xdbdb24, 0xdbdb49, 0xdbdb6d, 0xdbdb92, 0xdbdbb6, 0xdbdbdb, 0xdbdbff, 0xdbff00,
  0xdbff24, 0xdbff49, 0xdbff6d, 0xdbff92, 0xdbffb6, 0xdbffdb, 0xdbffff, 0xff0000, 0xff0024,
  0xff0049, 0xff006d, 0xff0092, 0xff00b6, 0xff00db, 0xff00ff, 0xff2400, 0xff2424, 0xff2449,
  0xff246d, 0xff2492, 0xff24b6, 0xff24db, 0xff24ff, 0xff4900, 0xff4924, 0xff4949, 0xff496d,
  0xff4992, 0xff49b6, 0xff49db, 0xff49ff, 0xff6d00, 0xff6d24, 0xff6d49, 0xff6d6d, 0xff6d92,
  0xff6db6, 0xff6ddb, 0xff6dff, 0xff9200, 0xff9224, 0xff9249, 0xff926d, 0xff9292, 0xff92b6,
  0xff92db, 0xff92ff, 0xffb600, 0xffb624, 0xffb649, 0xffb66d, 0xffb692, 0xffb6b6, 0xffb6db,
  0xffb6ff, 0xffdb00, 0xffdb24, 0xffdb49, 0xffdb6d, 0xffdb92, 0xffdbb6, 0xffdbdb, 0xffdbff,
  0xffff00, 0xffff24, 0xffff49, 0xffff6d, 0xffff92, 0xffffb6, 0xffffdb, 0xffffff
];

export const zxNextBgra: number[] = [
  0xff000000, 0xff240000, 0xff490000, 0xff6d0000, 0xff920000, 0xffb60000, 0xffdb0000, 0xffff0000, 0xff002400,
  0xff242400, 0xff492400, 0xff6d2400, 0xff922400, 0xffb62400, 0xffdb2400, 0xffff2400, 0xff004900, 0xff244900,
  0xff494900, 0xff6d4900, 0xff924900, 0xffb64900, 0xffdb4900, 0xffff4900, 0xff006d00, 0xff246d00, 0xff496d00,
  0xff6d6d00, 0xff926d00, 0xffb66d00, 0xffdb6d00, 0xffff6d00, 0xff009200, 0xff249200, 0xff499200, 0xff6d9200,
  0xff929200, 0xffb69200, 0xffdb9200, 0xffff9200, 0xff00b600, 0xff24b600, 0xff49b600, 0xff6db600, 0xff92b600,
  0xffb6b600, 0xffdbb600, 0xffffb600, 0xff00db00, 0xff24db00, 0xff49db00, 0xff6ddb00, 0xff92db00, 0xffb6db00,
  0xffdbdb00, 0xffffdb00, 0xff00ff00, 0xff24ff00, 0xff49ff00, 0xff6dff00, 0xff92ff00, 0xffb6ff00, 0xffdbff00,
  0xffffff00, 0xff000024, 0xff240024, 0xff490024, 0xff6d0024, 0xff920024, 0xffb60024, 0xffdb0024, 0xffff0024,
  0xff002424, 0xff242424, 0xff492424, 0xff6d2424, 0xff922424, 0xffb62424, 0xffdb2424, 0xffff2424, 0xff004924,
  0xff244924, 0xff494924, 0xff6d4924, 0xff924924, 0xffb64924, 0xffdb4924, 0xffff4924, 0xff006d24, 0xff246d24,
  0xff496d24, 0xff6d6d24, 0xff926d24, 0xffb66d24, 0xffdb6d24, 0xffff6d24, 0xff009224, 0xff249224, 0xff499224,
  0xff6d9224, 0xff929224, 0xffb69224, 0xffdb9224, 0xffff9224, 0xff00b624, 0xff24b624, 0xff49b624, 0xff6db624,
  0xff92b624, 0xffb6b624, 0xffdbb624, 0xffffb624, 0xff00db24, 0xff24db24, 0xff49db24, 0xff6ddb24, 0xff92db24,
  0xffb6db24, 0xffdbdb24, 0xffffdb24, 0xff00ff24, 0xff24ff24, 0xff49ff24, 0xff6dff24, 0xff92ff24, 0xffb6ff24,
  0xffdbff24, 0xffffff24, 0xff000049, 0xff240049, 0xff490049, 0xff6d0049, 0xff920049, 0xffb60049, 0xffdb0049,
  0xffff0049, 0xff002449, 0xff242449, 0xff492449, 0xff6d2449, 0xff922449, 0xffb62449, 0xffdb2449, 0xffff2449,
  0xff004949, 0xff244949, 0xff494949, 0xff6d4949, 0xff924949, 0xffb64949, 0xffdb4949, 0xffff4949, 0xff006d49,
  0xff246d49, 0xff496d49, 0xff6d6d49, 0xff926d49, 0xffb66d49, 0xffdb6d49, 0xffff6d49, 0xff009249, 0xff249249,
  0xff499249, 0xff6d9249, 0xff929249, 0xffb69249, 0xffdb9249, 0xffff9249, 0xff00b649, 0xff24b649, 0xff49b649,
  0xff6db649, 0xff92b649, 0xffb6b649, 0xffdbb649, 0xffffb649, 0xff00db49, 0xff24db49, 0xff49db49, 0xff6ddb49,
  0xff92db49, 0xffb6db49, 0xffdbdb49, 0xffffdb49, 0xff00ff49, 0xff24ff49, 0xff49ff49, 0xff6dff49, 0xff92ff49,
  0xffb6ff49, 0xffdbff49, 0xffffff49, 0xff00006d, 0xff24006d, 0xff49006d, 0xff6d006d, 0xff92006d, 0xffb6006d,
  0xffdb006d, 0xffff006d, 0xff00246d, 0xff24246d, 0xff49246d, 0xff6d246d, 0xff92246d, 0xffb6246d, 0xffdb246d,
  0xffff246d, 0xff00496d, 0xff24496d, 0xff49496d, 0xff6d496d, 0xff92496d, 0xffb6496d, 0xffdb496d, 0xffff496d,
  0xff006d6d, 0xff246d6d, 0xff496d6d, 0xff6d6d6d, 0xff926d6d, 0xffb66d6d, 0xffdb6d6d, 0xffff6d6d, 0xff00926d,
  0xff24926d, 0xff49926d, 0xff6d926d, 0xff92926d, 0xffb6926d, 0xffdb926d, 0xffff926d, 0xff00b66d, 0xff24b66d,
  0xff49b66d, 0xff6db66d, 0xff92b66d, 0xffb6b66d, 0xffdbb66d, 0xffffb66d, 0xff00db6d, 0xff24db6d, 0xff49db6d,
  0xff6ddb6d, 0xff92db6d, 0xffb6db6d, 0xffdbdb6d, 0xffffdb6d, 0xff00ff6d, 0xff24ff6d, 0xff49ff6d, 0xff6dff6d,
  0xff92ff6d, 0xffb6ff6d, 0xffdbff6d, 0xffffff6d, 0xff000092, 0xff240092, 0xff490092, 0xff6d0092, 0xff920092,
  0xffb60092, 0xffdb0092, 0xffff0092, 0xff002492, 0xff242492, 0xff492492, 0xff6d2492, 0xff922492, 0xffb62492,
  0xffdb2492, 0xffff2492, 0xff004992, 0xff244992, 0xff494992, 0xff6d4992, 0xff924992, 0xffb64992, 0xffdb4992,
  0xffff4992, 0xff006d92, 0xff246d92, 0xff496d92, 0xff6d6d92, 0xff926d92, 0xffb66d92, 0xffdb6d92, 0xffff6d92,
  0xff009292, 0xff249292, 0xff499292, 0xff6d9292, 0xff929292, 0xffb69292, 0xffdb9292, 0xffff9292, 0xff00b692,
  0xff24b692, 0xff49b692, 0xff6db692, 0xff92b692, 0xffb6b692, 0xffdbb692, 0xffffb692, 0xff00db92, 0xff24db92,
  0xff49db92, 0xff6ddb92, 0xff92db92, 0xffb6db92, 0xffdbdb92, 0xffffdb92, 0xff00ff92, 0xff24ff92, 0xff49ff92,
  0xff6dff92, 0xff92ff92, 0xffb6ff92, 0xffdbff92, 0xffffff92, 0xff0000b6, 0xff2400b6, 0xff4900b6, 0xff6d00b6,
  0xff9200b6, 0xffb600b6, 0xffdb00b6, 0xffff00b6, 0xff0024b6, 0xff2424b6, 0xff4924b6, 0xff6d24b6, 0xff9224b6,
  0xffb624b6, 0xffdb24b6, 0xffff24b6, 0xff0049b6, 0xff2449b6, 0xff4949b6, 0xff6d49b6, 0xff9249b6, 0xffb649b6,
  0xffdb49b6, 0xffff49b6, 0xff006db6, 0xff246db6, 0xff496db6, 0xff6d6db6, 0xff926db6, 0xffb66db6, 0xffdb6db6,
  0xffff6db6, 0xff0092b6, 0xff2492b6, 0xff4992b6, 0xff6d92b6, 0xff9292b6, 0xffb692b6, 0xffdb92b6, 0xffff92b6,
  0xff00b6b6, 0xff24b6b6, 0xff49b6b6, 0xff6db6b6, 0xff92b6b6, 0xffb6b6b6, 0xffdbb6b6, 0xffffb6b6, 0xff00dbb6,
  0xff24dbb6, 0xff49dbb6, 0xff6ddbb6, 0xff92dbb6, 0xffb6dbb6, 0xffdbbdb6, 0xffffdbb6, 0xff00ffb6, 0xff24ffb6,
  0xff49ffb6, 0xff6dffb6, 0xff92ffb6, 0xffb6ffb6, 0xffdbffb6, 0xffffffb6, 0xff0000db, 0xff2400db, 0xff4900db,
  0xff6d00db, 0xff9200db, 0xffb600db, 0xffdb00db, 0xffff00db, 0xff0024db, 0xff2424db, 0xff4924db, 0xff6d24db,
  0xff9224db, 0xffb624db, 0xffdb24db, 0xffff24db, 0xff0049db, 0xff2449db, 0xff4949db, 0xff6d49db, 0xff9249db,
  0xffb649db, 0xffdb49db, 0xffff49db, 0xff006ddb, 0xff246ddb, 0xff496ddb, 0xff6d6ddb, 0xff926ddb, 0xffb66ddb,
  0xffdb6ddb, 0xffff6ddb, 0xff0092db, 0xff2492db, 0xff4992db, 0xff6d92db, 0xff9292db, 0xffb692db, 0xffdb92db,
  0xffff92db, 0xff00b6db, 0xff24b6db, 0xff49b6db, 0xff6db6db, 0xff92b6db, 0xffb6b6db, 0xffdbb6db, 0xffffb6db,
  0xff00dbdb, 0xff24dbdb, 0xff49dbdb, 0xff6ddbdb, 0xff92dbdb, 0xffb6dbdb, 0xffdbdbdb, 0xffffdbdb, 0xff00ffdb,
  0xff24ffdb, 0xff49ffdb, 0xff6dffdb, 0xff92ffdb, 0xffb6ffdb, 0xffdbffdb, 0xffffffdb, 0xff0000ff, 0xff2400ff,
  0xff4900ff, 0xff6d00ff, 0xff9200ff, 0xffb600ff, 0xffdb00ff, 0xffff00ff, 0xff0024ff, 0xff2424ff, 0xff4924ff,
  0xff6d24ff, 0xff9224ff, 0xffb624ff, 0xffdb24ff, 0xffff24ff, 0xff0049ff, 0xff2449ff, 0xff4949ff, 0xff6d49ff,
  0xff9249ff, 0xffb649ff, 0xffdb49ff, 0xffff49ff, 0xff006dff, 0xff246dff, 0xff496dff, 0xff6d6dff, 0xff926dff,
  0xffb66dff, 0xffdb6dff, 0xffff6dff, 0xff0092ff, 0xff2492ff, 0xff4992ff, 0xff6d92ff, 0xff9292ff, 0xffb692ff,
  0xffdb92ff, 0xffff92ff, 0xff00b6ff, 0xff24b6ff, 0xff49b6ff, 0xff6db6ff, 0xff92b6ff, 0xffb6b6ff, 0xffdbb6ff,
  0xffffb6ff, 0xff00dbff, 0xff24dbff, 0xff49dbff, 0xff6ddbff, 0xff92dbff, 0xffb6dbff, 0xffdbdbff, 0xffffdbff,
  0xff00ffff, 0xff24ffff, 0xff49ffff, 0xff6dffff, 0xff92ffff, 0xffb6ffff, 0xffdbffff, 0xffffffff
];
