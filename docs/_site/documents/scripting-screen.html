<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/kliveide/assets/css/semantic.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/kliveide/assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i" rel="stylesheet">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Scripting the Screen | Klive IDE</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Scripting the Screen" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The ScreenConfiguration class" />
<meta property="og:description" content="The ScreenConfiguration class" />
<link rel="canonical" href="http://localhost:4000/kliveide/documents/scripting-screen" />
<meta property="og:url" content="http://localhost:4000/kliveide/documents/scripting-screen" />
<meta property="og:site_name" content="Klive IDE" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-04T00:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://localhost:4000/kliveide/documents/scripting-screen","headline":"Scripting the Screen","dateModified":"2019-01-04T00:00:00+01:00","datePublished":"2019-01-04T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/kliveide/documents/scripting-screen"},"description":"The ScreenConfiguration class","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- Header -->
    <div class="ui vertical stripe segment with-header-back">
      <div class="ui container high">
        <h1 class="ui header">Klive IDE</h1>
        <h3 class="ui header">Full-fledged ZX Spectrum IDE with Electron, VS Code</h2>
      </div>
    </div>

    <!-- Menu -->
    <div class="ui vertical stripe segment with-menu-back">
      <div class="ui container">
        <div class="ui menu with-menu-back">
          <a class="item" href="/kliveide/">Home</a>
          <a class=" item" href="/kliveide/getting-started/install-kliveide.html">Getting Started</a>
          <a class=" active  item" href="/kliveide/documents/main-features.html">Documents</a>
          <a class="item" href="/kliveide/spectrum/basic-toc.html">ZX Spectrum</a>
          <a class="item" target="_blank" href="https://github.com/Dotneteer/kliveide">GitHub</a>
        </div>
      </div>
    </div>

    <div class="ui vertical stripe segment with-content-back">
      <div class="ui container">
        <div class="ui grid">
          <div class="three wide computer sixteen wide mobile column">
            <div class="document-list">
              
              
              
              
              
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Z80 Assembler</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                    <a id="main-features" class="" href="/kliveide/documents/main-features#article">Main Features</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="how-assembler-works" class="" href="/kliveide/documents/how-assembler-works#article">How the assembler works</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="language-structure" class="" href="/kliveide/documents/language-structure#article">Language structure</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="labels" class="" href="/kliveide/documents/labels-and-symbols#article">Labels and Symbols</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="expressions" class="" href="/kliveide/documents/expressions#article">Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="instructions" class="" href="/kliveide/documents/z80-instructions#article">Z80 Instructions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="pragmas" class="" href="/kliveide/documents/pragmas#article">Pragmas</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="statements" class="" href="/kliveide/documents/statements#article">Statements</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="macros" class="" href="/kliveide/documents/macros#article">Macros</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="directives" class="" href="/kliveide/documents/directives#article">Directives</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="modules" class="" href="/kliveide/documents/modules#article">Modules</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="structs" class="" href="/kliveide/documents/structs#article">Structures</a>
                      
                      
                      
                    
                  
                    
                    <a id="assembler-output" class="" href="/kliveide/documents/assembler-output#article">Assembler Output</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Tool Commands</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="tool-overview" class="" href="/kliveide/documents/tool-overview#article">Overview</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="memory-commands" class="" href="/kliveide/documents/common-commands#article">Common Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="memory-section-commands" class="" href="/kliveide/documents/memory-section-commands#article">Disassembly: Memory Sections</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="annotation-commands" class="" href="/kliveide/documents/annotation-commands#article">Disassembly: Annotations</a>
                      
                      
                      
                    
                  
                    
                    <a id="breakpoint-commands" class="" href="/kliveide/documents/breakpoint-commands#article">Disassembly: Breakpoints</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="miscellaneous-commands" class="" href="/kliveide/documents/miscellaneous-commands#article">Disassembly: Miscellaneous</a>
                      
                      
                      
                    
                  
                    
                    <a id="watch-commands" class="" href="/kliveide/documents/tape-explorer-commands#article">Tape Explorer Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="watch-commands" class="" href="/kliveide/documents/watch-commands#article">Watch Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="watch-expressions" class="" href="/kliveide/documents/watch-expressions#article">Watch Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="watch-samples" class="" href="/kliveide/documents/watch-samples#article">Watch Samples</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
                  
                  
                  
                  
                  <div class="document-category  expanded " onclick="handleClick(this)">
                    <span class="category-name">Scripting</span>
                    <div class="extender  expanded ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  displayed ">
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-overview" class="" href="/kliveide/documents/scripting-overview#article">Overview</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-object-model" class="" href="/kliveide/documents/scripting-object-model#article">Scripting Object Model</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-vms" class="" href="/kliveide/documents/scripting-vms#article">Managing Virtual machines</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-z80" class="" href="/kliveide/documents/scripting-z80#article">Scripting the Z80 CPU</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-screen" class=" active " href="/kliveide/documents/scripting-screen#article">Scripting the Screen</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-memory" class="" href="/kliveide/documents/scripting-memory#article">Scripting the Memory</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-audio" class="" href="/kliveide/documents/scripting-audio#article">Scripting the Audio</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Unit Testing</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-basics" class="" href="/kliveide/documents/unit-testing-basics#article">Syntax Basics</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-expressions" class="" href="/kliveide/documents/unit-testing-expressions#article">Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-details" class="" href="/kliveide/documents/unit-testing-details#article">Detailed Syntax</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-process" class="" href="/kliveide/documents/unit-testing-process#article">The Testing Process</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
            </div>
          </div>
          <div class="thirteen wide computer sixteen wide mobile column with-main-back">
            <div id="#article" class="main-title-area">
              <h1>Scripting &raquo; Scripting the Screen</h1>
            </div>
            <div class="main-content-area">
              <h1 id="the-screenconfiguration-class">The ScreenConfiguration class</h1>

<p>This class represents the configuration of the virtual machine’s screen.</p>

<p><strong>Namespace</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu.Devices.Screen</code><br />
<strong>Assembly</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class ScreenConfiguration : IScreenConfiguration
</code></pre></div></div>

<p>The screen rendering mechanism uses a large number of configuration options that provides
the timing so that the CPU and the rendering hardware can work in tandem. The software 
emulation implements the same mechanism.</p>

<p>As the following figure shows, the screen has visible and non-visible areas, just as in the
case of the real hardware. Originally, the non-visible area was required by the cathode-ray tube
so that the electron beam could sync the screen rendering properly.</p>

<p><img src="/kliveide/assets/images/scripting/spectrum-screen.png" alt="Screen Dimensions" /></p>

<h2 id="screenwidth">ScreenWidth</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int ScreenWidth { get; }
</code></pre></div></div>

<p>The width of the visible screen area in pixels.</p>

<h2 id="screenlines">ScreenLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int ScreenLines { get; }
</code></pre></div></div>

<p>The height of the visible screen area in pixels.</p>

<h2 id="displaywidth">DisplayWidth</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int DisplayWidth { get; }
</code></pre></div></div>

<p>The width of the display area in pixels (256).</p>

<h2 id="displaylines">DisplayLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int DisplayLines { get; }
</code></pre></div></div>

<p>The height of the display area in pixels.</p>

<h2 id="nonvisiblebordertoplines">NonVisibleBorderTopLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int NonVisibleBorderTopLines { get; }
</code></pre></div></div>

<p>The number of top border lines that are not visible when rendering the screen.</p>

<h2 id="bordertoplines">BorderTopLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderTopLines { get; }
</code></pre></div></div>

<p>The number of border lines above the display area.</p>

<h2 id="borderbottomlines">BorderBottomLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderBottomLines { get; }
</code></pre></div></div>

<p>The number of border lines below the display area.</p>

<h2 id="nonvisibleborderbottomlines">NonVisibleBorderBottomLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int NonVisibleBorderBottomLines { get; }
</code></pre></div></div>

<p>The number of bottom border lines that are not visible when rendering the screen.</p>

<h2 id="verticalsynclines">VerticalSyncLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int VerticalSyncLines { get; }
</code></pre></div></div>

<p>Number of lines used for vertical synch.</p>

<h2 id="borderlefttime">BorderLeftTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderLeftTime { get; }
</code></pre></div></div>

<p>The number of CPY T-cycles of displaying the left part of the border.</p>

<h2 id="borderleftpixels">BorderLeftPixels</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderLeftPixels { get; }
</code></pre></div></div>

<p>The number of border pixels to the left of the display (<code class="language-plaintext highlighter-rouge">2 * BorderLeftTime</code>).</p>

<h2 id="borderrighttime">BorderRightTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderRightTime { get; }
</code></pre></div></div>

<p>The number of CPY T-cycles of displaying the right part of the border.</p>

<h2 id="borderrightpixels">BorderRightPixels</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int BorderRightPixels { get; }
</code></pre></div></div>

<p>The number of border pixels to the right of the display (<code class="language-plaintext highlighter-rouge">2 * BorderRightTime</code>).</p>

<h2 id="nonvisibleborderrighttime">NonVisibleBorderRightTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int NonVisibleBorderRightTime { get; }
</code></pre></div></div>

<p>The time given in CPY T-cycles to render the nonvisible right part of the border.</p>

<h2 id="horizontalblankingtime">HorizontalBlankingTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int HorizontalBlankingTime { get; }
</code></pre></div></div>

<p>Horizontal blanking time (HSync + blanking) given in CPU T-cycles.</p>

<p>The <code class="language-plaintext highlighter-rouge">ScreenConfiguration</code> class provides other properties that are related to screen rendering.</p>

<h2 id="interrupttact">InterruptTact</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int InterruptTact { get; }
</code></pre></div></div>

<p>The tact index of the interrupt signal relative to the top-left screen pixel</p>

<h2 id="firstdisplayline">FirstDisplayLine</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int FirstDisplayLine { get; }
</code></pre></div></div>

<p>The screen line number of the first display line (`VerticalSyncLines</p>
<ul>
  <li>NonVisibleBorderTopLines + BorderTopLines`).</li>
</ul>

<h2 id="lastdisplayline">LastDisplayLine</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int LastDisplayLine { get; }
</code></pre></div></div>

<p>The screen line number of the last display line (<code class="language-plaintext highlighter-rouge">FirstDisplayLine + DisplayLines - 1</code>).</p>

<h2 id="displaylinetime">DisplayLineTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int DisplayLineTime { get; }
</code></pre></div></div>

<p>The time of rendering a display pixel row, given in CPU T-cycles.</p>

<h2 id="screenlinetime">ScreenLineTime</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int ScreenLineTime { get; }
</code></pre></div></div>

<p>The time of rendering an entire raster line, given in CPU T-cycles (<code class="language-plaintext highlighter-rouge">BorderLeftTime + 
DisplayLineTime + BorderRightTime + NonVisibleBorderRightTime + HorizontalBlankingTime</code>).</p>

<h2 id="rasterlines">RasterLines</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int RasterLines { get; }
</code></pre></div></div>

<p>The number of raster lines in the screen (<code class="language-plaintext highlighter-rouge">FirstDisplayLine + DisplayLines + BorderBottomLines + NonVisibleBorderBottomLines</code>).</p>

<h2 id="firstdisplaypixeltact">FirstDisplayPixelTact</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int FirstDisplayPixelTact { get; }
</code></pre></div></div>

<p>The tact in which the top left display pixel should be rendered, given in CPU T-cycles
(<code class="language-plaintext highlighter-rouge">FirstDisplayLine * ScreenLineTime + BorderLeftTime</code>).</p>

<h2 id="firstscreenpixeltact">FirstScreenPixelTact</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int FirstScreenPixelTact { get; }
</code></pre></div></div>

<p>The tact in which the top left screen pixel (border) should be displayed
(<code class="language-plaintext highlighter-rouge">[VerticalSyncLines + NonVisibleBorderTopLines] * ScreenLineTime</code>).</p>

<h2 id="screenrenderingframetactcount">ScreenRenderingFrameTactCount</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int ScreenRenderingFrameTactCount { get; }
</code></pre></div></div>

<p>The number of CPU T-cycles used for the full rendering of the screen
(<code class="language-plaintext highlighter-rouge">RasterLines * ScreenLineTime</code>).</p>

<h1 id="methods">Methods</h1>

<p>The class provides a few helper methods.</p>

<h2 id="istactvisibleint-int">IsTactVisible(int, int)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public bool IsTactVisible(int line, int tactInLine)
</code></pre></div></div>

<p>Tests whether the specified tact is in the visible area of the screen. Returns true, if
the tact renders the visible part of the screen; otherwise, false.</p>

<h3 id="arguments">Arguments</h3>

<p><code class="language-plaintext highlighter-rouge">line</code>: Raster line index<br />
<code class="language-plaintext highlighter-rouge">tactInLine</code>: Tact index within the line</p>

<h2 id="istactindisplayareaint-int">IsTactInDisplayArea(int, int)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public bool IsTactInDisplayArea(int line, int tactInLine)
</code></pre></div></div>

<p>Tests whether the specified tact is in the display area of the screen. Returns true, if
the tact renders the display part of the screen; otherwise, false.</p>

<h3 id="arguments-1">Arguments</h3>

<p><code class="language-plaintext highlighter-rouge">line</code>: Raster line index<br />
<code class="language-plaintext highlighter-rouge">tactInLine</code>: Tact index within the line</p>

<h1 id="the-screenbitmap-class">The ScreenBitmap class</h1>

<p>This class represents the current screen’s pixels, including the border. Every byte stands for a palette
index. The value of a pixel can be <code class="language-plaintext highlighter-rouge">#00</code> to <code class="language-plaintext highlighter-rouge">#0F</code> on a Spectrum 48K, 128K, and +3E model. On ZX Spectrum Next,
the value is the entire byte range from <code class="language-plaintext highlighter-rouge">#00</code> to <code class="language-plaintext highlighter-rouge">#FF</code>. The content is read-only, you cannot change it.</p>

<p><strong>Namespace</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu.Scripting</code><br />
<strong>Assembly</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public sealed class ScreenBitmap
</code></pre></div></div>

<h2 id="thisint">this[int]</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public byte[] this[int lineNo] { get; }
</code></pre></div></div>

<p>Retrieves a byte array for the raster line specified in <em><code class="language-plaintext highlighter-rouge">lineNo</code></em>. The value at zero index represent 
the leftmost border pixel of the line. The last item in the array is the rightmost pixel in the line.</p>

<h2 id="thisint-int">this[int, int]</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public byte this[int row, int column] { get; }
</code></pre></div></div>

<p>Retrieves the byte for the screen pixel in the given <em><code class="language-plaintext highlighter-rouge">column</code></em> of the specified <em><code class="language-plaintext highlighter-rouge">row</code></em>.</p>

<h2 id="getdisplaypixelint-int">GetDisplayPixel(int, int)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public byte GetDisplayPixel(int row, int col)
</code></pre></div></div>

<p>While <code class="language-plaintext highlighter-rouge">this[int, int]</code> retrieves the specified screen pixel, this method obtains the display pixel of 
(<em><code class="language-plaintext highlighter-rouge">row</code></em>, <em><code class="language-plaintext highlighter-rouge">column</code></em>).</p>

<h1 id="the-screenrenderingstatus-class">The ScreenRenderingStatus class</h1>

<p>Provides properties about the current screen rendering status of the machine.</p>

<p><strong>Namespace</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu.Devices.Screen</code><br />
<strong>Assembly</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public sealed class ScreenRenderingStatus
</code></pre></div></div>

<h2 id="currentframetact">CurrentFrameTact</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int CurrentFrameTact { get; }
</code></pre></div></div>

<p>Gets the number of the current tact within the frame being rendered.</p>

<h2 id="rasterline">RasterLine</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int RasterLine { get; }
</code></pre></div></div>

<p>Gets the number of the current raster line in the frame being rendered.</p>

<h2 id="currentrenderingtact">CurrentRenderingTact</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ScreenRenderingTact CurrentRenderingTact { get; }
</code></pre></div></div>

<p>Gets details about the current tact in the frame being rendered. See more details
in the description of <a href="ScreenRenderingTact.md"><code class="language-plaintext highlighter-rouge">ScreenRenderingTact</code></a>.</p>

<h1 id="the-screenrenderingtable-class">The ScreenRenderingTable class</h1>

<p>Represents the screen rendering table of the virtual machine</p>

<p><strong>Namespace</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu.Devices.Screen</code><br />
<strong>Assembly</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public sealed class ScreenRenderingTable
</code></pre></div></div>

<h2 id="count">Count</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public int Count { get; }
</code></pre></div></div>

<p>Gets the number of items in the screen rendering table.</p>

<h2 id="thisint-1">this[int]</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ScreenRenderingTact this[int index] { get; }
</code></pre></div></div>

<p>Gets the entry of the screen rendering table specified by <em><code class="language-plaintext highlighter-rouge">index</code></em>. See more details
in the description of <a href="ScreenRenderingTact.md"><code class="language-plaintext highlighter-rouge">ScreenRenderingTact</code></a>.</p>

<h1 id="the-screenrenderingtact-class">The ScreenRenderingTact class</h1>

<p>Provides details about a screen rendering tact.</p>

<p><strong>Namespace</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu.Devices.Screen</code><br />
<strong>Assembly</strong>: <code class="language-plaintext highlighter-rouge">Spect.Net.SpectrumEmu</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public sealed class ScreenRenderingTact
</code></pre></div></div>

<h2 id="phase">Phase</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ScreenRenderingPhase Phase { get; }
</code></pre></div></div>

<p>The rendering phase to be applied for the particular tact. The <code class="language-plaintext highlighter-rouge">ScreenRenderingPhase</code> enum
has these values:</p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">None</code></td>
      <td>The ULA does not do any rendering</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Border</code></td>
      <td>The ULA sets the border color to display the current pixel.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BorderFetchPixel</code></td>
      <td>The ULA sets the border color to display the current pixel. It prepares to display the fist pixel in the row with prefetching the corresponding byte from the display memory.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BorderFetchPixelAttr</code></td>
      <td>The ULA sets the border color to display the current pixel. It has already fetched the 8 pixel bits to display. It carries on preparing to display the fist pixel in the row with prefetching the corresponding attribute byte from the display memory.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DisplayB1</code></td>
      <td>The ULA displays the next two pixels of Byte1 sequentially during a single Z80 clock cycle.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DisplayB1FetchB2</code></td>
      <td>The ULA displays the next two pixels of Byte1 sequentially during a single Z80 clock cycle. It prepares to display the pixels of the next byte in the row with prefetching the corresponding attribute from the display memory.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DisplayB2</code></td>
      <td>The ULA displays the next two pixels of Byte2 sequentially during a single Z80 clock cycle.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DisplayB2FetchB1</code></td>
      <td>The ULA displays the next two pixels of Byte2 sequentially during a single Z80 clock cycle. It prepares to display the pixels of the next byte in the row with prefetching the corresponding byte from the display memory.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DisplayB2FetchA1</code></td>
      <td>The ULA displays the next two pixels of Byte2 sequentially during a single Z80 clock cycle. It prepares to display the pixels of the next byte in the row with prefetching the corresponding attribute from the display memory.</td>
    </tr>
  </tbody>
</table>

<h2 id="contentiondelay">ContentionDelay</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public byte ContentionDelay { get; }
</code></pre></div></div>

<p>Contention delay during the particular screen rendering tact, provided, the CPU is reading 
or writing data in the screen memory area (<code class="language-plaintext highlighter-rouge">#4000</code>-<code class="language-plaintext highlighter-rouge">#7FFF</code>).</p>

<h2 id="pixelbytetofetchaddress">PixelByteToFetchAddress</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ushort PixelByteToFetchAddress { get; }
</code></pre></div></div>

<p>Display memory address used in the particular tact to fetch the pixel value.</p>

<h2 id="attributetofetchaddress">AttributeToFetchAddress</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ushort AttributeToFetchAddress { get; }
</code></pre></div></div>

<p>Display memory address used in the particular tact to fetch the attribute of a pixel.</p>

<h2 id="xpos">XPos</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ushort XPos { get; }
</code></pre></div></div>

<p>The X position of the pixel in screen coordinates.</p>

<h2 id="ypos">YPos</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ushort YPos { get; }
</code></pre></div></div>

<p>The Y position of the pixel in screen coordinates.</p>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer  -->
    <div class="ui vertical stripe segment with-header-back">
        <footer class="ui container">
          <p>&copy; Istvan Novak, 2020</p>
        </footer>
      </div>
  
    <!-- Floating return to top button -->
    <a href="javascript:" id="return-to-top">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    
    <!-- Floating go to previous button -->
    <a href="/kliveide/documents/scripting-z80#article" id="go-to-prev">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" transform="rotate(-90)">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    
    
    <!-- Floating go to next button -->
    <a href="/kliveide/documents/scripting-memory#article" id="go-to-next">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" transform="rotate(90)">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    

    <script>
      window.addEventListener("scroll", function(){
        var scrolled = window.pageYOffset > 50;
        document.getElementById("return-to-top").style.display = scrolled ? "block" : "none";
        var prevEl = document.getElementById("go-to-prev");
        if (prevEl) prevEl.style.display = scrolled ? "block" : "none";
        var nextEl = document.getElementById("go-to-next");
        if (nextEl) nextEl.style.display = scrolled ? "block" : "none";
      });
      var intervalId = 0;
      var $scrollButton = document.querySelector('#return-to-top');
      function scrollStep() {
        if (window.pageYOffset === 0) {
          clearInterval(intervalId);
        }
        window.scroll(0, window.pageYOffset - 50);
      }
      function scrollToTop() {
        intervalId = setInterval(scrollStep, 6.66);
      }
      $scrollButton.addEventListener('click', scrollToTop);

      function handleClick(arg) {
        var nextEl = arg.nextElementSibling;
        var extEl = arg.children[1];
        if (arg.classList.contains("expanded")) {
          arg.classList.remove("expanded");
          arg.classList.add("collapsed");
          extEl.classList.remove("expanded");
          extEl.classList.add("collapsed");
          nextEl.classList.remove("displayed")
          nextEl.classList.add("hidden")
        } else {
          arg.classList.remove("collapsed");
          arg.classList.add("expanded");
          extEl.classList.remove("collapsed");
          extEl.classList.add("expanded");
          nextEl.classList.remove("hidden")
          nextEl.classList.add("displayed")
        }
      }
    </script>

    
  </body>
</html>