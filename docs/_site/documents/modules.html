<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/kliveide/assets/css/semantic.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/kliveide/assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700&amp;subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i" rel="stylesheet">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Modules | Klive IDE</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Modules" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="As you have earlier learned, SpectNetIDE uses nested scopes for labels and symbols. When it resolves them to their values, the engine starts from the innermost scope and traverses all outer scopes until it finds the symbol value, or goes through all scopes without success — and it declares the sought symbol undefined. This type of resolution does not allow an outer scope to reach a symbol within a nested scope." />
<meta property="og:description" content="As you have earlier learned, SpectNetIDE uses nested scopes for labels and symbols. When it resolves them to their values, the engine starts from the innermost scope and traverses all outer scopes until it finds the symbol value, or goes through all scopes without success — and it declares the sought symbol undefined. This type of resolution does not allow an outer scope to reach a symbol within a nested scope." />
<link rel="canonical" href="http://localhost:4000/kliveide/documents/modules" />
<meta property="og:url" content="http://localhost:4000/kliveide/documents/modules" />
<meta property="og:site_name" content="Klive IDE" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-01T00:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://localhost:4000/kliveide/documents/modules","headline":"Modules","dateModified":"2019-01-01T00:00:00+01:00","datePublished":"2019-01-01T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/kliveide/documents/modules"},"description":"As you have earlier learned, SpectNetIDE uses nested scopes for labels and symbols. When it resolves them to their values, the engine starts from the innermost scope and traverses all outer scopes until it finds the symbol value, or goes through all scopes without success — and it declares the sought symbol undefined. This type of resolution does not allow an outer scope to reach a symbol within a nested scope.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- Header -->
    <div class="ui vertical stripe segment with-header-back">
      <div class="ui container high">
        <h1 class="ui header">Klive IDE</h1>
        <h3 class="ui header">Full-fledged ZX Spectrum IDE with Electron, VS Code</h2>
      </div>
    </div>

    <!-- Menu -->
    <div class="ui vertical stripe segment with-menu-back">
      <div class="ui container">
        <div class="ui menu with-menu-back">
          <a class="item" href="/kliveide/">Home</a>
          <a class=" item" href="/kliveide/getting-started/install-kliveide.html">Getting Started</a>
          <a class=" active  item" href="/kliveide/documents/main-features.html">Documents</a>
          <a class="item" href="/kliveide/spectrum/basic-toc.html">ZX Spectrum</a>
          <a class="item" target="_blank" href="https://github.com/Dotneteer/kliveide">GitHub</a>
        </div>
      </div>
    </div>

    <div class="ui vertical stripe segment with-content-back">
      <div class="ui container">
        <div class="ui grid">
          <div class="three wide computer sixteen wide mobile column">
            <div class="document-list">
              
              
              
              
              
                
                  
                  
                  
                  
                  <div class="document-category  expanded " onclick="handleClick(this)">
                    <span class="category-name">Z80 Assembler</span>
                    <div class="extender  expanded ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  displayed ">
                  
                    
                  
                    
                    <a id="main-features" class="" href="/kliveide/documents/main-features#article">Main Features</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="how-assembler-works" class="" href="/kliveide/documents/how-assembler-works#article">How the assembler works</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="language-structure" class="" href="/kliveide/documents/language-structure#article">Language structure</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="labels" class="" href="/kliveide/documents/labels-and-symbols#article">Labels and Symbols</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="expressions" class="" href="/kliveide/documents/expressions#article">Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="instructions" class="" href="/kliveide/documents/z80-instructions#article">Z80 Instructions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="pragmas" class="" href="/kliveide/documents/pragmas#article">Pragmas</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="statements" class="" href="/kliveide/documents/statements#article">Statements</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="macros" class="" href="/kliveide/documents/macros#article">Macros</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="directives" class="" href="/kliveide/documents/directives#article">Directives</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="modules" class=" active " href="/kliveide/documents/modules#article">Modules</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="structs" class="" href="/kliveide/documents/structs#article">Structures</a>
                      
                      
                      
                    
                  
                    
                    <a id="assembler-output" class="" href="/kliveide/documents/assembler-output#article">Assembler Output</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Tool Commands</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="tool-overview" class="" href="/kliveide/documents/tool-overview#article">Overview</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="memory-commands" class="" href="/kliveide/documents/common-commands#article">Common Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="memory-section-commands" class="" href="/kliveide/documents/memory-section-commands#article">Disassembly: Memory Sections</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="annotation-commands" class="" href="/kliveide/documents/annotation-commands#article">Disassembly: Annotations</a>
                      
                      
                      
                    
                  
                    
                    <a id="breakpoint-commands" class="" href="/kliveide/documents/breakpoint-commands#article">Disassembly: Breakpoints</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="miscellaneous-commands" class="" href="/kliveide/documents/miscellaneous-commands#article">Disassembly: Miscellaneous</a>
                      
                      
                      
                    
                  
                    
                    <a id="watch-commands" class="" href="/kliveide/documents/tape-explorer-commands#article">Tape Explorer Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                    <a id="watch-commands" class="" href="/kliveide/documents/watch-commands#article">Watch Commands</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="watch-expressions" class="" href="/kliveide/documents/watch-expressions#article">Watch Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="watch-samples" class="" href="/kliveide/documents/watch-samples#article">Watch Samples</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Scripting</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-overview" class="" href="/kliveide/documents/scripting-overview#article">Overview</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-object-model" class="" href="/kliveide/documents/scripting-object-model#article">Scripting Object Model</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-vms" class="" href="/kliveide/documents/scripting-vms#article">Managing Virtual machines</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-z80" class="" href="/kliveide/documents/scripting-z80#article">Scripting the Z80 CPU</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-screen" class="" href="/kliveide/documents/scripting-screen#article">Scripting the Screen</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-memory" class="" href="/kliveide/documents/scripting-memory#article">Scripting the Memory</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="scripting-audio" class="" href="/kliveide/documents/scripting-audio#article">Scripting the Audio</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                  <div class="document-category  collapsed " onclick="handleClick(this)">
                    <span class="category-name">Unit Testing</span>
                    <div class="extender  collapsed ">
                      <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" >
                        <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
                      </svg>
                    </div>
                  </div>
                  <div class="article-names  hidden ">
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-basics" class="" href="/kliveide/documents/unit-testing-basics#article">Syntax Basics</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-expressions" class="" href="/kliveide/documents/unit-testing-expressions#article">Expressions</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-details" class="" href="/kliveide/documents/unit-testing-details#article">Detailed Syntax</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                    <a id="unit-testing-process" class="" href="/kliveide/documents/unit-testing-process#article">The Testing Process</a>
                      
                      
                      
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                  </div>
                  
                
                  
                  
                  
                  
                
            </div>
          </div>
          <div class="thirteen wide computer sixteen wide mobile column with-main-back">
            <div id="#article" class="main-title-area">
              <h1>Z80 Assembler &raquo; Modules</h1>
            </div>
            <div class="main-content-area">
              <p>As you have earlier learned, <strong>SpectNetIDE</strong> uses nested scopes for labels and symbols. When it resolves them to their values, the engine starts from the innermost scope and traverses all outer scopes until it finds the symbol value, or goes through all scopes without success — and it declares the sought symbol undefined.
This type of resolution does not allow an outer scope to reach a symbol within a nested scope.</p>

<p><strong>SpectNetIDE</strong> allows you to declare modules. A module is a logical scope for label and symbol resolution; it works entirely the same way as other scopes. However, a module offers something special: you can access labels and symbols declared within a module.
Just as other lexical scopes, modules can be nested.</p>

<h2 id="module-declarations">Module Declarations</h2>

<p>A module is a section of code enclosed between the <code class="language-plaintext highlighter-rouge">.module</code> and <code class="language-plaintext highlighter-rouge">.endmodule</code> statements. Each module needs to have a name. You have three options to define the name:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; #1: Label
MyModule:
  .module
  ; ...
  .endmodule

; #2: Module ID
  .module OtherModule
  ; ...
  .endmodule

; #3: Label and ID
Module3:
  .module ThirdModule
  ; ...
  .endmodule
</code></pre></div></div>

<p>You can use either a label preceding the module declaration or an identifier after the <code class="language-plaintext highlighter-rouge">.module</code> token, or even both. The identifier takes precedence over the name, so the names of the three modules in this sample are <code class="language-plaintext highlighter-rouge">MyModule</code>, <code class="language-plaintext highlighter-rouge">OtherModule</code>, and <code class="language-plaintext highlighter-rouge">ThirdModule</code>, respectively.</p>

<blockquote>
  <p><strong>SpectNetIDE</strong> offers syntax variations for <code class="language-plaintext highlighter-rouge">.module</code> and <code class="language-plaintext highlighter-rouge">.endmodule</code>. You can use the following tokens instead of <code class="language-plaintext highlighter-rouge">.module</code>: <code class="language-plaintext highlighter-rouge">module</code>, <code class="language-plaintext highlighter-rouge">.scope</code>, or <code class="language-plaintext highlighter-rouge">scope</code>. <code class="language-plaintext highlighter-rouge">.endmodule</code> has other variants, too: <code class="language-plaintext highlighter-rouge">endmodule</code>, <code class="language-plaintext highlighter-rouge">.endscope</code>, <code class="language-plaintext highlighter-rouge">endscope</code>, <code class="language-plaintext highlighter-rouge">.moduleend</code>, <code class="language-plaintext highlighter-rouge">moduleend</code>, <code class="language-plaintext highlighter-rouge">.scopeend</code>, <code class="language-plaintext highlighter-rouge">scopeend</code>. You can write all these tokens with entirely lowercase or uppercase characters.</p>
</blockquote>

<h2 id="names-and-labels">Names and Labels</h2>

<p>When you define a module without a name, the assembler raises an error. So, this code is invalid because of the missing module name:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module
; ...
.endmodule
</code></pre></div></div>

<p>You can’t use a temporary name for the module, so both of these declarations raise an issue:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`TempModule:
  .module
  .endmodule

Module4:
  .module `Temp4
  .endmodule
</code></pre></div></div>

<p>Nonetheless, this construct is valid, as here the module uses its identifier for the name, and not its label:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`Temp5:
  .module Fifth
  .endmodule
</code></pre></div></div>

<p>If you need to address the start point of a module, you need to declare it with a label (of course, it may have an ID, too). You can refer to this label as the start of the module. However, you cannot use the module identifier for this purpose:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MyModule:
  .module
  ld hl,MyModule     ; OK, label name is used
EndOfMod:
  .endmodule

  .module OtherModule
  ld hl,OtherModule  ; Error, module name cannot be used as a label
  .endmodule

Module3:
  .module ThirdModule
  ld hl,Module3      ; OK, label name is used
  ld de,ThirdModule  ; Error, module name cannot be used as a label
  .endmodule
</code></pre></div></div>

<p>The label preceding the <code class="language-plaintext highlighter-rouge">.endmodule</code> statement belongs to the scope of the module.</p>

<h2 id="nested-modules">Nested Modules</h2>

<p>You can nest modules into each other:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  ; ...
  .module Nested
  .endmodule
  ; ...
  .module OtherNested
  ; ...
    .module DeeplyNested
      ; ... 
    .endmodule
  ; ...
  .endmodule
  ; ...
.endmodule
</code></pre></div></div>

<p>The full name of modules reflects the hierarchy of their nesting. The modules in this sample have these full names in the order of their declaration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Main
Main.Nested
Main.OtherNested
Main.OtherNested.DeeplyNested
</code></pre></div></div>

<p>The compiler does not allow two modules have the same full name. From this point of view, this naming is valid, even if we have two modules with the name <code class="language-plaintext highlighter-rouge">Nested</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  ; ...
  .module Nested
  .endmodule
  ; ...
  .module OtherNested
	; ...
	.module Nested ; OK!
	.endmodule
	; ...
  .endmodule
  ; ...
.endmodule
</code></pre></div></div>

<p>As you see, the full names are unique:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Main.Nested
Main.OtherNested
Main.OtherNested.Nested
</code></pre></div></div>

<h2 id="label-and-symbol-resolution">Label and Symbol Resolution</h2>

<p>With <em>simple identifiers</em>, the name resolution happens the way you already learned, from the innermost scope toward the outermost one. However, besides simple IDs, you can use <em>scoped identifiers</em> that have multiple segments.</p>

<p>Scoped identifiers have this syntax:</p>

<p><strong><code class="language-plaintext highlighter-rouge">::</code></strong>? <em>identifier</em> (<strong><code class="language-plaintext highlighter-rouge">.</code></strong> <em>identifier</em>)*</p>

<p>When the compiler finds a scoped identifier, it uses a different resolution technique. Instead of starting from the innermost scope toward the outermost, it begins with the current module and traverses toward the nested modules:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  MyValue .equ 1
  ld a,Main.MyValue        ; ld a,1
  
  .module Nested
    MyValue .equ 11
  .endmodule
  
  ld b,Nested.MyValue      ; ld b,11
  ld c,Main.Nested.MyValue ; ld c,11
  
  .module OtherNested
    MyValue .equ 12
    ld d,Nested.MyValue    ; ld d,121
  
    .module Nested
      MyValue .equ 121
      ld e,Nested.MyValue  ; ld e,121
      ld h,Main.MyValue    ; ld h,1
    .endmodule

    ld l,Nested.MyValue    ; ld l,121
  .endmodule
  
.endmodule
</code></pre></div></div>

<p>You can use the same name for modules on different hierarchy levels, such as in this case:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  MyValue .equ 1
  ld a,Main.MyValue         ; ld a,1
  
  .module Nested
    MyValue .equ 11
    ld b,Nested.MyValue     ; ld b,111
	
    .module Nested
      MyValue .equ 111
      ld c,Nested.MyValue   ; ld c,111
    .endmodule

  .endmodule

.endmodule

.module Nested
  MyValue .equ 2
.endmodule
</code></pre></div></div>

<p>As you see, the name <code class="language-plaintext highlighter-rouge">Nested</code> is used in several modules:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Main
Main.Nested
Main.Nested.Nested
Nested
</code></pre></div></div>

<p>With the standard name resolution, we cannot access the <code class="language-plaintext highlighter-rouge">MyValue</code> symbol of the outer <code class="language-plaintext highlighter-rouge">Nested</code> module from within <code class="language-plaintext highlighter-rouge">Main.Nested.Nested</code>, as that module is in a different subtree. In such a situation we can use the global scope token, <code class="language-plaintext highlighter-rouge">::</code>, in front of the scoped identifier. This token instructs the assembler to start identifier resolution from the global module.</p>

<p>Now, we can access that <code class="language-plaintext highlighter-rouge">MyValue</code> symbol:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  MyValue .equ 1
  ld a,Main.MyValue         ; ld a,1
  
  .module Nested
    MyValue .equ 11
    ld b,Nested.MyValue     ; ld b,111
	
    .module Nested
      MyValue .equ 111
      ld c,Nested.MyValue   ; ld c,111
      ld d,::Nested.MyValue ; ld d,2 -- !!!
    .endmodule

  .endmodule

.endmodule

.module Nested
  MyValue .equ 2
.endmodule
</code></pre></div></div>

<h2 id="using-module-local-names">Using Module-Local Names</h2>

<p>You can hide symbols within modules using the module-local identifier notation. Every label and symbol that starts with <code class="language-plaintext highlighter-rouge">@</code> is a private symbol within its module. It means that the particular symbol is visible only within its containing module (and the ones nested in the containing module). In this code, every local identifier can be accessed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  MyValue .equ 1
  ld a,Main.MyValue         ; ld a,1
  
  .module Nested
    @MyValue .equ 11
    ld b,Nested.MyValue     ; ld b,111
	
    .module @Nested
      MyValue .equ 111
      ld c,@MyValue         ; ld c,11
      ld d,::Nested.MyValue ; ld d,2
    .endmodule

    ld e,@MyValue           ; ld e,11
    ld h,@Nested.MyValue    ; ld h,111
  .endmodule

.endmodule

.module Nested
  MyValue .equ 2
.endmodule
</code></pre></div></div>

<p>However, module-local names cannot be used outside of their containing module, so this code snippet raises an error:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.module Main
  MyValue .equ 1
  ld a,Main.MyValue         
  
  .module Nested
	@MyValue .equ 11
	
	.module @Nested
	  MyValue .equ 111
	  ld c,Nested.@MyValue    ; Error
	.endmodule

  .endmodule

  ld d,Nested.@Nested.MyValue ; Error
.endmodule
</code></pre></div></div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer  -->
    <div class="ui vertical stripe segment with-header-back">
        <footer class="ui container">
          <p>&copy; Istvan Novak, 2020</p>
        </footer>
      </div>
  
    <!-- Floating return to top button -->
    <a href="javascript:" id="return-to-top">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    
    <!-- Floating go to previous button -->
    <a href="/kliveide/documents/directives#article" id="go-to-prev">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" transform="rotate(-90)">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    
    
    <!-- Floating go to next button -->
    <a href="/kliveide/documents/structs#article" id="go-to-next">
      <span>
        <svg width="32" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" transform="rotate(90)">
          <path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z"/>
        </svg>
      </span>
    </a>
    

    <script>
      window.addEventListener("scroll", function(){
        var scrolled = window.pageYOffset > 50;
        document.getElementById("return-to-top").style.display = scrolled ? "block" : "none";
        var prevEl = document.getElementById("go-to-prev");
        if (prevEl) prevEl.style.display = scrolled ? "block" : "none";
        var nextEl = document.getElementById("go-to-next");
        if (nextEl) nextEl.style.display = scrolled ? "block" : "none";
      });
      var intervalId = 0;
      var $scrollButton = document.querySelector('#return-to-top');
      function scrollStep() {
        if (window.pageYOffset === 0) {
          clearInterval(intervalId);
        }
        window.scroll(0, window.pageYOffset - 50);
      }
      function scrollToTop() {
        intervalId = setInterval(scrollStep, 6.66);
      }
      $scrollButton.addEventListener('click', scrollToTop);

      function handleClick(arg) {
        var nextEl = arg.nextElementSibling;
        var extEl = arg.children[1];
        if (arg.classList.contains("expanded")) {
          arg.classList.remove("expanded");
          arg.classList.add("collapsed");
          extEl.classList.remove("expanded");
          extEl.classList.add("collapsed");
          nextEl.classList.remove("displayed")
          nextEl.classList.add("hidden")
        } else {
          arg.classList.remove("collapsed");
          arg.classList.add("expanded");
          extEl.classList.remove("collapsed");
          extEl.classList.add("expanded");
          nextEl.classList.remove("hidden")
          nextEl.classList.add("displayed")
        }
      }
    </script>

    
  </body>
</html>