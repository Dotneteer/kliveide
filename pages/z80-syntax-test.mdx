import { ClickableImageSimple as ClickableImage } from '../page-components'

# Z80 Syntax Highlighting Test

This page tests the Z80 assembly syntax highlighting with various language constructs.

## Basic Instructions

```z80
; Basic Z80 instructions
nop                     ; No operation
ld a, 5                ; Load immediate value
ld b, c                ; Load register to register
ld hl, (0x8000)        ; Load from memory
inc a                  ; Increment register
dec b                  ; Decrement register
```

## Arithmetic and Logic Operations

```z80
; Arithmetic operations
add a, b               ; Add register
adc a, 10              ; Add with carry
sub c                  ; Subtract register
sbc a, 0xFF            ; Subtract with carry
and 0xF0               ; Logical AND
or b                   ; Logical OR
xor c                  ; Logical XOR
cp 0                   ; Compare
```

## Jump and Call Instructions

```z80
; Control flow
jp start               ; Unconditional jump
jr nz, loop            ; Conditional relative jump
call subroutine        ; Call subroutine
ret                    ; Return from subroutine
rst 0x08               ; Restart
djnz countdown         ; Decrement and jump if not zero
```

## Stack Operations

```z80
; Stack operations
push af                ; Push accumulator and flags
push bc                ; Push register pair
pop de                 ; Pop register pair
pop hl                 ; Pop into HL
```

## Bit Operations

```z80
; Bit manipulation
rlc a                  ; Rotate left circular
rrc b                  ; Rotate right circular
rl c                   ; Rotate left through carry
rr d                   ; Rotate right through carry
sla e                  ; Shift left arithmetic
sra h                  ; Shift right arithmetic
bit 7, a               ; Test bit
set 0, b               ; Set bit
res 3, c               ; Reset bit
```

## Memory Operations

```z80
; Memory operations
ld (hl), a             ; Store to memory via HL
ld a, (de)             ; Load from memory via DE
ldi                    ; Load and increment
ldd                    ; Load and decrement
ldir                   ; Load, increment, repeat
lddr                   ; Load, decrement, repeat
```

## I/O Operations

```z80
; Input/Output
in a, (0xFE)           ; Input from port
out (0x01), a          ; Output to port
ini                    ; Input and increment
outi                   ; Output and increment
inir                   ; Input, increment, repeat
otir                   ; Output, increment, repeat
```

## Different Number Formats

```z80
; Various number formats
ld a, 255              ; Decimal
ld b, 0xFF             ; Hexadecimal (0x prefix)
ld c, $FF              ; Hexadecimal ($ prefix)  
ld d, 0FFh             ; Hexadecimal (h suffix)
ld e, %11111111        ; Binary (% prefix)
ld h, 11111111b        ; Binary (b suffix)
ld l, 377o             ; Octal (o suffix)
```

## Labels and Comments

```z80
start:                 ; Main entry point
    ld sp, 0xFFFF      ; Initialize stack pointer
    
main_loop:             ; Main program loop
    call read_input    ; Call input routine
    cp 27              ; Check for ESC key
    jp z, exit         ; Jump if ESC pressed
    jr main_loop       ; Continue loop
    
exit:
    halt               ; Stop processor

; Subroutine with local label
read_input:
    in a, (0xFE)       ; Read keyboard
    and 0x1F           ; Mask unused bits
    ret                ; Return to caller
```

## Assembler Directives

```z80
; Assembler directives
.org 0x8000            ; Set origin address
.equ SCREEN, 0x4000    ; Define constant
.db 0x01, 0x02, 0x03   ; Define bytes
.dw 0x1234, 0x5678     ; Define words
.ds 100                ; Define space

; Conditional assembly
.if DEBUG
    call debug_print
.endif

; Macros
.macro DELAY_MS time
    ld bc, time * 1000
    call delay_routine
.endm
```

## ZX Spectrum Next Extensions

```z80
; ZX Spectrum Next specific instructions
nextreg 0x07, 0x03     ; Set Next register
mul d, e               ; Multiply (Next extension)
swapnib                ; Swap nibbles
ldix                   ; Load and increment IX
pixeldn                ; Pixel down
```

## String Literals and Characters

```z80
; String and character constants
message: .db "Hello, World!", 0
char_a:  .db 'A'
newline: .db 13, 10, 0

; Escape sequences in strings
escaped: .db "Line 1\nLine 2\tTabbed\0"
```

## Complex Example

```z80
; Complete example: Clear screen routine
clear_screen:
    ld hl, SCREEN          ; Point to screen memory
    ld de, SCREEN + 1      ; Point to next byte
    ld bc, 6143            ; Screen size - 1
    ld (hl), 0             ; Clear first byte
    ldir                   ; Copy zero to rest of screen
    
    ; Clear attributes
    ld hl, 0x5800          ; Attribute memory
    ld de, 0x5801          ; Next attribute
    ld bc, 767             ; Attribute size - 1  
    ld (hl), %00000111     ; White on black
    ldir                   ; Fill attributes
    ret

; Constants
SCREEN      .equ 0x4000    ; Screen memory start
ATTR_MEM    .equ 0x5800    ; Attribute memory
BLACK       .equ %000      ; Black color
WHITE       .equ %111      ; White color
```

## Error Cases (Should Not Highlight)

These should appear as regular text without syntax highlighting:

```text
This is not Z80 assembly
Just plain text that shouldn't be highlighted
with some random words like ld and nop
```

## Mixed Content

```z80
; This should be highlighted as Z80
ld a, 100
nop

// C-style comment (should work)
/* Block comment should work too */

invalid_instruction_name  ; This should not be highlighted as keyword
```
