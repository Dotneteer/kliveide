import { Callout } from 'nextra/components'
import Image from 'next/image'
import mainKey from '../../public/images/getting-started/main-key.png'
import symbolKey from '../../public/images/getting-started/symbol-key.png'
import aboveKey from '../../public/images/getting-started/above-key.png'
import belowKey from '../../public/images/getting-started/below-key.png'
import glyphKey from '../../public/images/getting-started/glyph-key.png'
import sizingStart from '../../public/images/getting-started/sizing-start.png'
import sizingEnd from '../../public/images/getting-started/sizing-end.png'
 
# Using the Keyboard

You can use the computer's physical keyboard or a virtual keyboard to emulate keystrokes. To let the Emulator process the computer's keyboard, the Emulator should have the focus. When you change the current window to the Emulator with your machine's keys or click it with the mouse, it is ready to receive keystrokes.

Of course, you should start the machine and wait while it reaches its main execution cycles and starts watching for keys.

## Using the Virtual Keyboard

If you do not find it easy to use the computer's physical keyboard, you can use the virtual keyboard. You can display (or hide) it with one of these actions:

- Click the **View | Show the Virtual Keyboard** menu command while in the Emulator window
- Click the **Keyboard** icon in the Emulator's toolbar

When the keyboard is to show, Klive displays it according to the selected machine's type. These figures show the ZX Spectrum 48K keyboard and the ZX Spectrum 128L/+2E/+3E keyboard.

![ZX Spectrum 48 Keyboard](/images/getting-started/sp48-keyboard.png)

![ZX Spectrum 128 Keyboard](/images/getting-started/sp128-keyboard.png)

<Callout type="info" emoji="ðŸ’¡">
Klive also has custom keyboards for the Cambridge Z88 and the ZX Spectrum Next computers.
</Callout>

To press a key, move the mouse over the particular virtual key and click it. If you keep the mouse button down, it's just like keeping the button pressed. Releasing the mouse button behaves as you released the real key.

When you move the button slowly over a particular key, it will highlight the part of the button with the symbol shift-related and extended mode-related keys. When you click the mouse, it will automatically "press" the symbol shift or extended mode keys. 

You can use both the left and right mouse buttons. However, when using the right mouse button with normal keys, it behaves as if you pressed the **CAPS SHIFT** key simultaneously.

This table shows a few examples:

| Example | Description
|-|:-|
| <Image src={mainKey} alt="Hello" width="64" height="77" /> | The click will display `INPUT` (`i`) when you use the left mouse button or `INPUT` (`I`) with the right mouse button, depending on the current ZX Spectrum cursor mode. |
| <Image src={symbolKey} width="64" height="77" /> | The click will result in `AT` regardless of which mouse button you click. |
| <Image src={aboveKey} width="64" height="77" /> | The click will show `CODE` regardless of which mouse button you click. |
| <Image src={belowKey} width="64" height="90" /> | The click will display `IN` regardless of which mouse button you click. |
| <Image src={glyphKey} width="64" height="77" /> | The click will display a glyph with its top-left corner set if you click the left mouse button and the inverse of that glyph when you use the right mouse button. |

## Resizing the Virtual Keyboard

When you move the mouse to the top border of the virtual keyboard, a sizing splitter bar appears:

<Image src={sizingStart} width="550" height="390" style={{marginTop: 20}} />

Hold down the mouse key while over the splitter, and move it. As you move, Klive changes the keyboard size and resizes the emulator display accordingly:

<Image src={sizingEnd} width="550" height="390" style={{marginTop: 20}} />

When you reach the desired size, release the mouse button.

## Known Issues with the Virtual Keyboard

Klive uses some cheats with the glyphs over the numeric buttons. It emulates that you press the **GRAPHICS** button to turn on the graphics mode, then emulates the keypress, after that releases the key, and then emulates **GRAPHICS** again. While keeping the key pressed (the mouse button is held down) works for other keys, this behavior is ignored for glyphs.

If you click a glyph button several times repeatedly, the ZX Spectrum OS may not process the emulation of **GRAPHICS** quickly enough, and thus, the editor does not get out of the graphics mode. 

<Callout type="info" emoji="ðŸ’¡">
This is a difficult issue to manage. There is currently no fix for it. Please be patient and type a bit slower when you're about to use glyphs.
</Callout>
 
