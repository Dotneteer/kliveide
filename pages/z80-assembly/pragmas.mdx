import { Callout } from "nextra/components";

# Z80 Assembler Pragmas

Pragmas are special instructions for the Klive Z80 Assembler. They control the assembly process.

## `.org`

Sets the start address of the code.

```z80klive
.org #8000
ld a, 1
```

## `.bank`

Selects the 8K memory bank to use for the code.

```z80klive
.bank 3
ld a, 1
```

The `.bank` pragma automatically creates a `BANK<N>` label with the start address of the bank, where `<N>` is the bank number. For example, `.bank 3` creates a `BANK3` label with the value `#6000`.

## `.xorg`

Sets the start address of the code, but it does not emit any code. It is useful for defining labels for memory-mapped I/O ports.

```z80klive
.xorg #1000
MyLabel:
```

## `.ent`

Sets the entry address of the code. When running the code, the Z80 virtual machine will start execution from this address.

```z80klive
.org #8000
.ent #8000
ld a, 1
```

## `.xent`

Sets the entry address of the code, but it does not emit any code. It is useful for defining the entry point of a program that is already in memory.

```z80klive
.xent #8000
```

## `.equ`

Defines a label with a specific value.

```z80klive
MyValue .equ #1234
ld hl, MyValue
```

## `.var`

Defines a variable that can be changed later.

```z80klive
MyVar .var #100
MyVar .var MyVar + 1
```

## `.disp`

Sets the displacement for the following labels. It is useful for defining structures.

```z80klive
MyStruct:
  .disp 0
x: .defb 0
y: .defw 0
  .disp MyStruct
```

## `.defb` or `.db`

Defines a byte or a sequence of bytes.

```z80klive
.db #01, #02, #03
.db "Hello"
```

## `.defw` or `.dw`

Defines a word or a sequence of words.

```z80klive
.dw #1234, #5678
```

## `.defm` or `.dm`

Defines a message. The last character of the string will have its bit 7 set.

```z80klive
.dm "Hello"
```

## `.defn` or `.dn`

Defines a message without a terminator.

```z80klive
.dn "Hello"
```

## `.defh` or `.dh`

Defines a sequence of bytes from a hexadecimal string.

```z80klive
.dh "010203"
```

## `.defs` or `.ds`

Defines a block of memory with a specific size and optional fill value.

```z80klive
.ds 10, #ff
```

## `.defc` or `.dc`

Defines a character map.

```z80klive
.dc "A", #80
```

## `.defg` or `.dg`

Defines a sequence of bytes for ZX Spectrum graphics.

```z80klive
.dg "11111111"
```

## `.defgx` or `.dgx`

Defines a sequence of bytes for ZX Spectrum graphics with a different mapping.

```z80klive
.dgx "11111111"
```

## `.skip`

Skips a number of bytes in the output.

```z80klive
.skip 10
```

## `.extern`

Declares a label that is defined in another file.

```z80klive
.extern MyLabel
```

## `.fillb`

Fills a block of memory with a specific byte value.

```z80klive
.fillb 10, #ff
```

## `.fillw`

Fills a block of memory with a specific word value.

```z80klive
.fillw 10, #1234
```

## `.model`

Sets the machine model for the code.

```z80klive
.model spectrum48
```

## `.align`

Aligns the current address to a specific boundary.

```z80klive
.align 256
```

## `.trace`

Traces the output of the assembler to the console.

```z80klive
.trace "Hello"
.trace MyValue
```

## `.tracehex`

Traces the output of the assembler to the console in hexadecimal format.

```z80klive
.tracehex "Hello"
.tracehex MyValue
```

## `.rndseed`

Sets the seed for the random number generator.

```z80klive
.rndseed 1234
```

## `.error`

Emits an error message.

```z80klive
.error "This is an error"
```

## `.includebin` or `.incbin`

Includes a binary file in the output.

```z80klive
.includebin "mydata.bin"
```

## `.comparebin`

Compares a binary file with the output.

```z80klive
.comparebin "mydata.bin"
```

## `.zxbasic`

Allows using ZX BASIC code in the assembler.

```z80klive
.zxbasic
10 PRINT "Hello"
```

## `.onsuccess`

Executes a command on successful assembly.

```z80klive
.onsuccess "echo 'Success!'"
```
