(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{3934:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/scripting/overview",function(){return i(9831)}])},9831:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m,useTOC:()=>g});var s=i(4848),r=i(7849),n=i(2421),a=i(8023),l=i(9965),h=i.n(l);let o={src:"/kliveide/_next/static/media/empty-script-file.6e79ab82.png",height:404,width:1560,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAABlBMVEUfHx8hISFEVGdxAAAAAXRSTlPw/VsqegAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAA9JREFUeJxjYIQABgYYAwAAlwAPa2+eSwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},d={src:"/kliveide/_next/static/media/script-with-icons.84b891ab.png",height:404,width:1560,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAACVBMVEUfHx8lJSUdHR2FL/DbAAAAAXRSTlPw/VsqegAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAABFJREFUeJxjYIQABgYmCGAAAAC6ABYhq2hEAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},c={src:"/kliveide/_next/static/media/script-output.6e4bbd51.png",height:401,width:1557,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAABlBMVEUZGRkkJSVd7O3mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEklEQVR4nGNgZGRkZGAAYSgAAABlAAcIDOnaAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},p={src:"/kliveide/_next/static/media/script-output-pane.202b1deb.png",height:430,width:1589,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAABlBMVEUbISAfKSj2bDFBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEUlEQVR4nGNgZGRgYAQRMAAAAFcABpBV0jMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},u={src:"/kliveide/_next/static/media/script-output-progress.2870b6c3.png",height:582,width:1591,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAACVBMVEUYGBgiIiIzMzP53BGdAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAFElEQVR4nGNgYoQABiZGBghggtIAASsAD89VWT4AAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},A={src:"/kliveide/_next/static/media/scripting-history.14193301.png",height:856,width:608,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAADFBMVEUsLi8hJSc0NDQ0WYKTxt31AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAIklEQVR4nE2IsQ0AAAiDKP3/Z6OTLAQQSThCVaAo2fHFqwEE0gAoc81UQwAAAABJRU5ErkJggg==",blurWidth:6,blurHeight:8};function g(e){return[{value:"Running the Script",id:"running-the-script",depth:2},{value:"Script Output",id:"script-output",depth:2},{value:"Scripting History",id:"scripting-history",depth:2}]}let m=(0,r.e)(function(e){let{toc:t=g(e)}=e,i={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{children:"Overview"}),"\n",(0,s.jsxs)(i.p,{children:["Klive IDE has a scripting system with a JavaScript-like syntax. When you create files with the ",(0,s.jsx)(i.code,{children:".ksx"})," extension, the IDE considers them script files and allows you to run them."]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Note"}),": The scripting system is new in the IDE and will evolve with every release. Though I strive to keep compatibility with older versions, you may find some breaking changes."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Get acquainted with the scripting system! Follow these steps to create and run your first script:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Open an existing Klive project, or create a new one."}),"\n",(0,s.jsxs)(i.li,{children:["With the ",(0,s.jsx)(i.strong,{children:"New file"})," context menu, add a new script file, ",(0,s.jsx)(i.code,{children:"myScript.ksx"}),", to the project’s root."]}),"\n",(0,s.jsx)(i.li,{children:"After you add it, Klive displays the empty file in the code editor:"}),"\n"]}),"\n",(0,s.jsx)(h(),{src:o,alt:"EmptyScript",width:"780",height:"202",style:{marginTop:24}}),"\n",(0,s.jsxs)(i.ol,{start:"4",children:["\n",(0,s.jsx)(i.li,{children:"Type this code into the editor:"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{tabIndex:"0","data-language":"javascript","data-word-wrap":"",children:(0,s.jsx)(i.code,{children:(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"Output."}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"writeLine"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Hello from Klive IDE!"'}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})})}),"\n",(0,s.jsxs)(i.ol,{start:"5",children:["\n",(0,s.jsx)(i.li,{children:"The script window’s header has two icons, as the following figure shows. Click the first one (Run this script file) to start the script."}),"\n"]}),"\n",(0,s.jsx)(h(),{src:d,alt:"ScriptWithIcons",width:"780",height:"202",style:{marginTop:24}}),"\n",(0,s.jsxs)(i.ol,{start:"6",children:["\n",(0,s.jsx)(i.li,{children:"It starts the script and displays its output in a new document, the script output window:"}),"\n"]}),"\n",(0,s.jsx)(h(),{src:c,alt:"ScriptOutput",width:"780",height:"202",style:{marginTop:24}}),"\n",(0,s.jsx)(i.h2,{id:t[0].id,children:t[0].value}),"\n",(0,s.jsx)(i.p,{children:"The scripting system uses a compiler to convert the script into an internal format, and then the scripting engine runs the code. The code runs asynchronously, so you can cancel the run even if you create an infinite loop."}),"\n",(0,s.jsx)(i.p,{children:"A script can run in one of these locations:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"The IDE process"}),". Scripts running here access the IDE infrastructure through built-in objects; they can execute complex tasks (such as building the project) that require accessing the project system."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"The Emulator process"}),". These scripts can control the emulator and automate it through objects. For example, you can execute the next Z80 instruction, pause, and examine the Z80 register values to search for a particular condition. According to this condition, your script can decide how to go on."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["By default, the script runs in the IDE process. You can change the host to the emulator by adding the ",(0,s.jsx)(i.code,{children:'"emu"'})," string literal at the top of the script. For example, the following code will run in the emulator:"]}),"\n",(0,s.jsx)(i.pre,{tabIndex:"0","data-language":"javascript","data-word-wrap":"",children:(0,s.jsxs)(i.code,{children:[(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"emu"'}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:";"})]}),"\n",(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"Output."}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"writeLine"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Hello from Klive IDE!"'}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})]})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Note"}),": Though the script runs in the emulator, it forwards its output to the IDE. You can display and examine the script output in the IDE window."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:t[1].id,children:t[1].value}),"\n",(0,s.jsx)(i.p,{children:"The scripting engine has an output pane in the Tool panel. This pane displays messages related to running scripts, such as starting and completing them. If compiling a script results in an error, the error is displayed here, too:"}),"\n",(0,s.jsx)(h(),{src:p,alt:"ScriptOutputPane",width:"795",height:"215",style:{marginTop:24}}),"\n",(0,s.jsx)(i.p,{children:"Each script has a pane displaying its output. When you start a script, the IDE immediately shows its output pane and refreshes it according to the script’s output. If you run a script multiple times, each run has its separate output pane."}),"\n",(0,s.jsx)(i.p,{children:"Let’s assume you run this script:"}),"\n",(0,s.jsx)(i.pre,{tabIndex:"0","data-language":"javascript","data-word-wrap":"",children:(0,s.jsxs)(i.code,{children:[(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"for"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"let"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" i "}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"; i "}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"<"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 1000"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"; i"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"++"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  Output."}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"writeLine"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Message item #"'}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" +"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" i);"})]}),"\n",(0,s.jsxs)(i.span,{children:[(0,s.jsx)(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"  delay"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"100"}),(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,s.jsx)(i.span,{children:(0,s.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,s.jsx)(i.p,{children:"The script output refreshes the pane as the for-loop generates new output items. In the header, it displays the number of output lines and the status of the script (Running):"}),"\n",(0,s.jsx)(h(),{src:u,alt:"ScriptOutputProgress",width:"795",height:"291",style:{marginTop:24}}),"\n",(0,s.jsx)(i.p,{children:"You can click the icon buttons in the header to execute a particular task. These icons from the left to right provide these functions:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Stop"}),". You can cancel a running script. The script’s state changes to “Stopped”."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Open Script File"}),". Clicking this button opens the script file in the code editor."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Clear script output"}),". You can immediately clear the script’s output (even if it is still running)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Copy to clipboard"}),". The current script output (plain text) is copied to the clipboard; you can paste it into other apps."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Turn on/off autoscrolling"}),". As the script output appends, the pane scrolls automatically to the bottom. You can use this button to turn this behavior on or off."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:t[2].id,children:t[2].value}),"\n",(0,s.jsx)(i.p,{children:"The IDE sidebar contains a Scripting tab where you can expand the Scripting History panel to list the scripts run since the IDE started:"}),"\n",(0,s.jsx)(h(),{src:A,alt:"ScriptingHistory",width:"304",height:"428",style:{marginTop:24}}),"\n",(0,s.jsx)(i.p,{children:"Each item represents a run. The first icon indicates the host (the tool icon represents scripts running in the IDE, and the display icon refers to the emulator-hosted scripts). The second icon tells you the status of a particular script."}),"\n",(0,s.jsx)(i.p,{children:"The script file’s name is followed by its running time; the IDE refreshes this information automatically."}),"\n",(0,s.jsx)(i.p,{children:"When you click an item, the IDE opens the related script output."})]})},"/scripting/overview",{filePath:"pages/scripting/overview.mdx",pageMap:n.O,frontMatter:{},title:"Overview"},"undefined"==typeof RemoteContent?g:RemoteContent.useTOC)},2421:(e,t,i)=>{"use strict";i.d(t,{O:()=>s});let s=[{data:{index:"Introduction","getting-started":"Getting Started","working-with-ide":"Working with the IDE",howto:"How To","z80-assembly":"Klive Z80 Assembler",scripting:"Scripting","command-reference":"Command Reference","machine-types":"Machine Types"}},{name:"command-reference",route:"/command-reference",frontMatter:{sidebarTitle:"Command Reference"}},{name:"getting-started",route:"/getting-started",children:[{data:{installation:"Installing Klive","first-run":"Running Klive",keyboard:"Using the Keyboard",tapes:"Loading from Tape","save-programs":"Saving Files","creating-project":"Creating a Klive Project"}},{name:"creating-project",route:"/getting-started/creating-project",frontMatter:{sidebarTitle:"Creating Project"}},{name:"first-run",route:"/getting-started/first-run",frontMatter:{sidebarTitle:"First Run"}},{name:"installation",route:"/getting-started/installation",frontMatter:{sidebarTitle:"Installation"}},{name:"keyboard",route:"/getting-started/keyboard",frontMatter:{sidebarTitle:"Keyboard"}},{name:"save-programs",route:"/getting-started/save-programs",frontMatter:{sidebarTitle:"Save Programs"}},{name:"tapes",route:"/getting-started/tapes",frontMatter:{sidebarTitle:"Tapes"}}]},{name:"howto",route:"/howto",children:[{data:{"file-extensions":"Changing default file extensions"}},{name:"file-extensions",route:"/howto/file-extensions",frontMatter:{sidebarTitle:"File Extensions"}}]},{name:"index",route:"/",frontMatter:{sidebarTitle:"Index"}},{name:"machine-types",route:"/machine-types",frontMatter:{sidebarTitle:"Machine Types"}},{name:"project-templates",route:"/project-templates",frontMatter:{sidebarTitle:"Project Templates"}},{name:"scripting",route:"/scripting",children:[{data:{overview:"Overview",syntax:"Scripting Syntax"}},{name:"overview",route:"/scripting/overview",frontMatter:{sidebarTitle:"Overview"}},{name:"syntax",route:"/scripting/syntax",frontMatter:{sidebarTitle:"Syntax"}}]},{name:"working-with-ide",route:"/working-with-ide",children:[{data:{"project-explorer":"The Project Explorer","editing-code":"Editing Code","run-debug":"Running & Debugging Code",zxb:"ZXBASIC Integration","ide-settings":"IDE Settings",cpu:"The CPU View",ula:"The ULA View",memory:"The Memory View",disassembly:"The Disassembly View",breakpoints:"The Breakpoints View","system-vars":"The System Variables View",basic:"The BASIC Listing",commands:"Interactive Commands","build-system":"The Build System"}},{name:"basic",route:"/working-with-ide/basic",frontMatter:{sidebarTitle:"Basic"}},{name:"breakpoints",route:"/working-with-ide/breakpoints",frontMatter:{sidebarTitle:"Breakpoints"}},{name:"build-system",route:"/working-with-ide/build-system",frontMatter:{sidebarTitle:"Build System"}},{name:"commands",route:"/working-with-ide/commands",frontMatter:{sidebarTitle:"Commands"}},{name:"cpu",route:"/working-with-ide/cpu",frontMatter:{sidebarTitle:"Cpu"}},{name:"disassembly",route:"/working-with-ide/disassembly",frontMatter:{sidebarTitle:"Disassembly"}},{name:"editing-code",route:"/working-with-ide/editing-code",frontMatter:{sidebarTitle:"Editing Code"}},{name:"ide-settings",route:"/working-with-ide/ide-settings",frontMatter:{sidebarTitle:"Ide Settings"}},{name:"memory",route:"/working-with-ide/memory",frontMatter:{sidebarTitle:"Memory"}},{name:"project-explorer",route:"/working-with-ide/project-explorer",frontMatter:{sidebarTitle:"Project Explorer"}},{name:"run-debug",route:"/working-with-ide/run-debug",frontMatter:{sidebarTitle:"Run Debug"}},{name:"system-vars",route:"/working-with-ide/system-vars",frontMatter:{sidebarTitle:"System Vars"}},{name:"ula",route:"/working-with-ide/ula",frontMatter:{sidebarTitle:"Ula"}},{name:"zxb",route:"/working-with-ide/zxb",frontMatter:{sidebarTitle:"Zxb"}}]},{name:"z80-assembly",route:"/z80-assembly",children:[{data:{"z80-assembler":"Assembler Overview","language-structure":"Language Structure",expressions:"Expressions","z80-instructions":"Z80 Instructions",pragmas:"Pragmas",statements:"Assembler Statements",macros:"Macros",structs:"Structs"}},{name:"expressions",route:"/z80-assembly/expressions",frontMatter:{sidebarTitle:"Expressions"}},{name:"language-structure",route:"/z80-assembly/language-structure",frontMatter:{sidebarTitle:"Language Structure"}},{name:"macros",route:"/z80-assembly/macros",frontMatter:{sidebarTitle:"Macros"}},{name:"pragmas",route:"/z80-assembly/pragmas",frontMatter:{sidebarTitle:"Pragmas"}},{name:"statements",route:"/z80-assembly/statements",frontMatter:{sidebarTitle:"Statements"}},{name:"structs",route:"/z80-assembly/structs",frontMatter:{sidebarTitle:"Structs"}},{name:"z80-assembler",route:"/z80-assembly/z80-assembler",frontMatter:{sidebarTitle:"Z80 Assembler"}},{name:"z80-instructions",route:"/z80-assembly/z80-instructions",frontMatter:{sidebarTitle:"Z80 Instructions"}}]}]}},e=>{var t=t=>e(e.s=t);e.O(0,[849,636,593,792],()=>t(3934)),_N_E=e.O()}]);