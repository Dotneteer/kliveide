import { Z80Tester } from "./z80-tester";

describe("Disassembler - IY bit instructions", () => {
  it("Bit instructions 0x00-0x0F work as expected", () => {
    // --- Act
    Z80Tester.Test("rlc (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x00);
    Z80Tester.Test("rlc (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x01);
    Z80Tester.Test("rlc (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x02);
    Z80Tester.Test("rlc (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x03);
    Z80Tester.Test("rlc (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x04);
    Z80Tester.Test("rlc (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x05);
    Z80Tester.Test("rlc (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x06);
    Z80Tester.Test("rlc (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x07);
    Z80Tester.Test("rrc (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x08);
    Z80Tester.Test("rrc (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x09);
    Z80Tester.Test("rrc (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x0a);
    Z80Tester.Test("rrc (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x0b);
    Z80Tester.Test("rrc (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x0c);
    Z80Tester.Test("rrc (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x0d);
    Z80Tester.Test("rrc (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x0e);
    Z80Tester.Test("rrc (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x0f);
  });

  it("Bit instructions 0x10-0x1F work as expected", () => {
    // --- Act
    Z80Tester.Test("rl (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x10);
    Z80Tester.Test("rl (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x11);
    Z80Tester.Test("rl (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x12);
    Z80Tester.Test("rl (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x13);
    Z80Tester.Test("rl (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x14);
    Z80Tester.Test("rl (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x15);
    Z80Tester.Test("rl (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x16);
    Z80Tester.Test("rl (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x17);
    Z80Tester.Test("rr (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x18);
    Z80Tester.Test("rr (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x19);
    Z80Tester.Test("rr (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x1a);
    Z80Tester.Test("rr (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x1b);
    Z80Tester.Test("rr (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x1c);
    Z80Tester.Test("rr (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x1d);
    Z80Tester.Test("rr (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x1e);
    Z80Tester.Test("rr (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x1f);
  });

  it("Bit instructions 0x20-0x2F work as expected", () => {
    // --- Act
    Z80Tester.Test("sla (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x20);
    Z80Tester.Test("sla (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x21);
    Z80Tester.Test("sla (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x22);
    Z80Tester.Test("sla (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x23);
    Z80Tester.Test("sla (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x24);
    Z80Tester.Test("sla (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x25);
    Z80Tester.Test("sla (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x26);
    Z80Tester.Test("sla (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x27);
    Z80Tester.Test("sra (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x28);
    Z80Tester.Test("sra (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x29);
    Z80Tester.Test("sra (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x2a);
    Z80Tester.Test("sra (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x2b);
    Z80Tester.Test("sra (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x2c);
    Z80Tester.Test("sra (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x2d);
    Z80Tester.Test("sra (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x2e);
    Z80Tester.Test("sra (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x2f);
  });

  it("Bit instructions 0x30-0x3F work as expected", () => {
    // --- Act
    Z80Tester.Test("sll (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x30);
    Z80Tester.Test("sll (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x31);
    Z80Tester.Test("sll (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x32);
    Z80Tester.Test("sll (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x33);
    Z80Tester.Test("sll (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x34);
    Z80Tester.Test("sll (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x35);
    Z80Tester.Test("sll (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x36);
    Z80Tester.Test("sll (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x37);
    Z80Tester.Test("srl (iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x38);
    Z80Tester.Test("srl (iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x39);
    Z80Tester.Test("srl (iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x3a);
    Z80Tester.Test("srl (iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x3b);
    Z80Tester.Test("srl (iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x3c);
    Z80Tester.Test("srl (iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x3d);
    Z80Tester.Test("srl (iy+#3D)", 0xfd, 0xcb, 0x3d, 0x3e);
    Z80Tester.Test("srl (iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x3f);
  });

  it("Bit instructions 0x40-0x4F work as expected", () => {
    // --- Act
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x50);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x51);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x52);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x53);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x54);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x55);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x56);
    Z80Tester.Test("bit 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x57);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x58);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x59);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5a);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5b);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5c);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5d);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5e);
    Z80Tester.Test("bit 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x5f);
  });

  it("Bit instructions 0x50-0x5F work as expected", () => {
    // --- Act
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x60);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x61);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x62);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x63);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x64);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x65);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x66);
    Z80Tester.Test("bit 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x67);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x68);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x69);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6a);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6b);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6c);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6d);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6e);
    Z80Tester.Test("bit 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x6f);
  });

  it("Bit instructions 0x60-0x6F work as expected", () => {
    // --- Act
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x70);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x71);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x72);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x73);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x74);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x75);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x76);
    Z80Tester.Test("bit 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x77);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x78);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x79);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7a);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7b);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7c);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7d);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7e);
    Z80Tester.Test("bit 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x7f);
  });

  it("Bit instructions 0x70-0x7F work as expected", () => {
    // --- Act
    Z80Tester.Test("bit 6,b", 0xcb, 0x70);
    Z80Tester.Test("bit 6,c", 0xcb, 0x71);
    Z80Tester.Test("bit 6,d", 0xcb, 0x72);
    Z80Tester.Test("bit 6,e", 0xcb, 0x73);
    Z80Tester.Test("bit 6,h", 0xcb, 0x74);
    Z80Tester.Test("bit 6,l", 0xcb, 0x75);
    Z80Tester.Test("bit 6,(hl)", 0xcb, 0x76);
    Z80Tester.Test("bit 6,a", 0xcb, 0x77);
    Z80Tester.Test("bit 7,b", 0xcb, 0x78);
    Z80Tester.Test("bit 7,c", 0xcb, 0x79);
    Z80Tester.Test("bit 7,d", 0xcb, 0x7a);
    Z80Tester.Test("bit 7,e", 0xcb, 0x7b);
    Z80Tester.Test("bit 7,h", 0xcb, 0x7c);
    Z80Tester.Test("bit 7,l", 0xcb, 0x7d);
    Z80Tester.Test("bit 7,(hl)", 0xcb, 0x7e);
    Z80Tester.Test("bit 7,a", 0xcb, 0x7f);
  });

  it("Bit instructions 0x80-0x8F work as expected", () => {
    // --- Act
    Z80Tester.Test("res 0,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x80);
    Z80Tester.Test("res 0,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x81);
    Z80Tester.Test("res 0,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x82);
    Z80Tester.Test("res 0,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x83);
    Z80Tester.Test("res 0,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x84);
    Z80Tester.Test("res 0,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x85);
    Z80Tester.Test("res 0,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x86);
    Z80Tester.Test("res 0,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x87);
    Z80Tester.Test("res 1,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x88);
    Z80Tester.Test("res 1,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x89);
    Z80Tester.Test("res 1,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x8a);
    Z80Tester.Test("res 1,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x8b);
    Z80Tester.Test("res 1,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x8c);
    Z80Tester.Test("res 1,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x8d);
    Z80Tester.Test("res 1,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x8e);
    Z80Tester.Test("res 1,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x8f);
  });

  it("Bit instructions 0x90-0x9F work as expected", () => {
    // --- Act
    Z80Tester.Test("res 2,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x90);
    Z80Tester.Test("res 2,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x91);
    Z80Tester.Test("res 2,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x92);
    Z80Tester.Test("res 2,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x93);
    Z80Tester.Test("res 2,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x94);
    Z80Tester.Test("res 2,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x95);
    Z80Tester.Test("res 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x96);
    Z80Tester.Test("res 2,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x97);
    Z80Tester.Test("res 3,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0x98);
    Z80Tester.Test("res 3,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0x99);
    Z80Tester.Test("res 3,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0x9a);
    Z80Tester.Test("res 3,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0x9b);
    Z80Tester.Test("res 3,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0x9c);
    Z80Tester.Test("res 3,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0x9d);
    Z80Tester.Test("res 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0x9e);
    Z80Tester.Test("res 3,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0x9f);
  });

  it("Bit instructions 0xA0-0xAF work as expected", () => {
    // --- Act
    Z80Tester.Test("res 4,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xa0);
    Z80Tester.Test("res 4,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xa1);
    Z80Tester.Test("res 4,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xa2);
    Z80Tester.Test("res 4,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xa3);
    Z80Tester.Test("res 4,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xa4);
    Z80Tester.Test("res 4,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xa5);
    Z80Tester.Test("res 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xa6);
    Z80Tester.Test("res 4,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xa7);
    Z80Tester.Test("res 5,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xa8);
    Z80Tester.Test("res 5,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xa9);
    Z80Tester.Test("res 5,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xaa);
    Z80Tester.Test("res 5,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xab);
    Z80Tester.Test("res 5,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xac);
    Z80Tester.Test("res 5,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xad);
    Z80Tester.Test("res 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xae);
    Z80Tester.Test("res 5,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xaf);
  });

  it("Bit instructions 0xB0-0xBF work as expected", () => {
    // --- Act
    Z80Tester.Test("res 6,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xb0);
    Z80Tester.Test("res 6,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xb1);
    Z80Tester.Test("res 6,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xb2);
    Z80Tester.Test("res 6,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xb3);
    Z80Tester.Test("res 6,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xb4);
    Z80Tester.Test("res 6,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xb5);
    Z80Tester.Test("res 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xb6);
    Z80Tester.Test("res 6,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xb7);
    Z80Tester.Test("res 7,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xb8);
    Z80Tester.Test("res 7,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xb9);
    Z80Tester.Test("res 7,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xba);
    Z80Tester.Test("res 7,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xbb);
    Z80Tester.Test("res 7,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xbc);
    Z80Tester.Test("res 7,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xbd);
    Z80Tester.Test("res 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xbe);
    Z80Tester.Test("res 7,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xbf);
  });

  it("Bit instructions 0xC0-0xCF work as expected", () => {
    // --- Act
    Z80Tester.Test("set 0,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xc0);
    Z80Tester.Test("set 0,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xc1);
    Z80Tester.Test("set 0,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xc2);
    Z80Tester.Test("set 0,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xc3);
    Z80Tester.Test("set 0,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xc4);
    Z80Tester.Test("set 0,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xc5);
    Z80Tester.Test("set 0,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xc6);
    Z80Tester.Test("set 0,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xc7);
    Z80Tester.Test("set 1,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xc8);
    Z80Tester.Test("set 1,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xc9);
    Z80Tester.Test("set 1,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xca);
    Z80Tester.Test("set 1,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xcb);
    Z80Tester.Test("set 1,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xcc);
    Z80Tester.Test("set 1,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xcd);
    Z80Tester.Test("set 1,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xce);
    Z80Tester.Test("set 1,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xcf);
  });

  it("Bit instructions 0xD0-0xDF work as expected", () => {
    // --- Act
    Z80Tester.Test("set 2,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xd0);
    Z80Tester.Test("set 2,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xd1);
    Z80Tester.Test("set 2,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xd2);
    Z80Tester.Test("set 2,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xd3);
    Z80Tester.Test("set 2,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xd4);
    Z80Tester.Test("set 2,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xd5);
    Z80Tester.Test("set 2,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xd6);
    Z80Tester.Test("set 2,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xd7);
    Z80Tester.Test("set 3,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xd8);
    Z80Tester.Test("set 3,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xd9);
    Z80Tester.Test("set 3,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xda);
    Z80Tester.Test("set 3,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xdb);
    Z80Tester.Test("set 3,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xdc);
    Z80Tester.Test("set 3,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xdd);
    Z80Tester.Test("set 3,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xde);
    Z80Tester.Test("set 3,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xdf);
  });

  it("Bit instructions 0xD0-0xDF work as expected", () => {
    // --- Act
    Z80Tester.Test("set 4,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xe0);
    Z80Tester.Test("set 4,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xe1);
    Z80Tester.Test("set 4,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xe2);
    Z80Tester.Test("set 4,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xe3);
    Z80Tester.Test("set 4,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xe4);
    Z80Tester.Test("set 4,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xe5);
    Z80Tester.Test("set 4,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xe6);
    Z80Tester.Test("set 4,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xe7);
    Z80Tester.Test("set 5,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xe8);
    Z80Tester.Test("set 5,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xe9);
    Z80Tester.Test("set 5,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xea);
    Z80Tester.Test("set 5,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xeb);
    Z80Tester.Test("set 5,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xec);
    Z80Tester.Test("set 5,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xed);
    Z80Tester.Test("set 5,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xee);
    Z80Tester.Test("set 5,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xef);
  });

  it("Bit instructions 0xF0-0xFF work as expected", () => {
    // --- Act
    Z80Tester.Test("set 6,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xf0);
    Z80Tester.Test("set 6,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xf1);
    Z80Tester.Test("set 6,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xf2);
    Z80Tester.Test("set 6,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xf3);
    Z80Tester.Test("set 6,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xf4);
    Z80Tester.Test("set 6,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xf5);
    Z80Tester.Test("set 6,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xf6);
    Z80Tester.Test("set 6,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xf7);
    Z80Tester.Test("set 7,(iy+#3D),b", 0xfd, 0xcb, 0x3d, 0xf8);
    Z80Tester.Test("set 7,(iy+#3D),c", 0xfd, 0xcb, 0x3d, 0xf9);
    Z80Tester.Test("set 7,(iy+#3D),d", 0xfd, 0xcb, 0x3d, 0xfa);
    Z80Tester.Test("set 7,(iy+#3D),e", 0xfd, 0xcb, 0x3d, 0xfb);
    Z80Tester.Test("set 7,(iy+#3D),h", 0xfd, 0xcb, 0x3d, 0xfc);
    Z80Tester.Test("set 7,(iy+#3D),l", 0xfd, 0xcb, 0x3d, 0xfd);
    Z80Tester.Test("set 7,(iy+#3D)", 0xfd, 0xcb, 0x3d, 0xfe);
    Z80Tester.Test("set 7,(iy+#3D),a", 0xfd, 0xcb, 0x3d, 0xff);
  });
});
